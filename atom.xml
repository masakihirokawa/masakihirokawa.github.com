<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Dolice Lab]]></title>
  <link href="https://lab.dolice.net/atom.xml" rel="self"/>
  <link href="https://lab.dolice.net/"/>
  <updated>2016-07-17T09:43:43+09:00</updated>
  <id>https://lab.dolice.net/</id>
  <author>
    <name><![CDATA[Masaki Hirokawa]]></name>
    <email><![CDATA[info@dolice.net]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[技術評論社「自律神経を整えるスマホアプリ100選」に掲載いただきました]]></title>
    <link href="https://lab.dolice.net/blog/2016/01/22/ios-gijutsu-hyohron-autonomic-nerves/"/>
    <updated>2016-01-22T00:00:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2016/01/22/ios-gijutsu-hyohron-autonomic-nerves</id>
    <content type="html"><![CDATA[<p><img src="https://lab.dolice.net/images/article/gijutsu-hyohron-autonomic-nerves.jpg" title="技術評論社「自律神経を整えるスマホアプリ100選」" alt="技術評論社「自律神経を整えるスマホアプリ100選」" /></p>

<p>技術評論社様より1月22日に発行された「<a href="http://gihyo.jp/book/2016/978-4-7741-7848-6" title="自律神経を整えるスマホアプリ100選">自律神経を整えるスマホアプリ100選</a>」という書籍にて、iPhoneアプリ「<a href="https://itunes.apple.com/us/app/hearing-healing/id694492667?mt=8" title="リラックス・ヒーリング">リラックス・ヒーリング</a>（<em>P 43</em>）」と「<a href="https://itunes.apple.com/us/app/law-of-attraction-free/id841157677?mt=8" title="望みが叶う！引き寄せの法則アプリ">望みが叶う！引き寄せの法則アプリ</a>（<em>P 75</em>）」の両アプリをご紹介いただきました。</p>

<p>全体的にアプリの特長が分かりやすく解説されており、QRコードからストアへのアクセスも容易になっています。他にも実用的なアプリが多数紹介されていますので、ご興味のある方は是非お手にとってご覧ください。</p>

<h2>書籍の詳細ページ</h2>

<ul>
<li><a href="http://gihyo.jp/book/2016/978-4-7741-7848-6" title="自律神経を整えるスマホアプリ100選：書籍案内｜技術評論社">自律神経を整えるスマホアプリ100選：書籍案内｜技術評論社</a></li>
</ul>


<h2>掲載アプリ</h2>

<h3>リラックス・ヒーリング</h3>

<p>α波発生に効果的なヒーリング音楽、雨音や森の中の小鳥のさえずりなどのサウンドを聴きながら、リラックスして深い眠りに。勉強や仕事に打ち込む時の集中力アップ目的での活用もできます。</p>

<p><a href="https://geo.itunes.apple.com/jp/app/rirakkusu-hiringu-xin-liangi/id694492667?mt=8" style="display:inline-block;overflow:hidden;background:url(https://linkmaker.itunes.apple.com/images/badges/en-us/badge_appstore-lrg.svg) no-repeat;width:165px;height:40px;"></a></p>

<h3>望みが叶う！引き寄せの法則アプリ</h3>

<p>「恋愛」「就活」「美容」「復縁」… 1日たったの3分で望みが叶う、あの「引き寄せの法則」を実践できる無料アプリです。豊富なサンプル文を組み合わせて、簡単にあなただけの「望み」を作成。プッシュ通知で引き寄せの「習慣化」ができます。</p>

<p><a href="https://itunes.apple.com/jp/app/wangmiga-yeu!-yinki-jiseno/id841157677?mt=8&uo=4" target="itunes_store" style="display:inline-block;overflow:hidden;background:url(https://linkmaker.itunes.apple.com/htmlResources/assets/ja_jp//images/web/linkmaker/badge_appstore-lrg.png) no-repeat;width:135px;height:40px;@media only screen{background-image:url(https://linkmaker.itunes.apple.com/htmlResources/assets/ja_jp//images/web/linkmaker/badge_appstore-lrg.svg);}"></a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Androidアプリ「浮世絵壁紙 - 美しい日本画ギャラリー」リリース]]></title>
    <link href="https://lab.dolice.net/blog/2015/12/07/android-ukiyo-e/"/>
    <updated>2015-12-07T12:28:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2015/12/07/android-ukiyo-e</id>
    <content type="html"><![CDATA[<p><img src="https://lab.dolice.net/images/article/ukiyo-e_android.jpg" title="Android app: 浮世絵壁紙 - 美しい日本画ギャラリー" alt="Android app: 浮世絵壁紙 - 美しい日本画ギャラリー" /></p>

<p>日本の浮世絵を600枚以上掲載したアプリ「<a href="https://play.google.com/store/apps/details?id=net.dolice.ukiyoe" title="浮世絵壁紙 - 美しい日本画ギャラリー">浮世絵壁紙 - 美しい日本画ギャラリー</a>」をリリースしました。</p>

<p>葛飾北斎、歌川広重、東洲斎写楽などの名作を、現代風に加工・修復しています。古紙独特の皺や染みを一つずつ丹念に消去し、浮世絵の持つ目の覚めるような紅や藍の色合いも、均一のトーンを保持しつつ再現するよう努めました。</p>

<p>このアプリが日本画の美しさを国内外の方に再認識していただく切っ掛けになることを願っています。</p>

<p>下記からアプリを無料でダウンロードできますので、是非ご利用ください。</p>

<p><a href="https://play.google.com/store/apps/details?id=net.dolice.ukiyoe&utm_source=global_co&utm_medium=prtnr&utm_content=Mar2515&utm_campaign=PartBadge&pcampaignid=MKT-AC-global-none-all-co-pr-py-PartBadges-Oct1515-1"><img src="https://play.google.com/intl/en_us/badges/images/apps/ja-play-badge.png" style="width: 150px;" /></a></p>

<h2>浮世絵のカテゴリ</h2>

<h3>年代別</h3>

<ul>
<li>1780年〜1804年</li>
<li>1804年〜1868年</li>
<li>1868年〜1912年</li>
<li>1915年〜1940年代</li>
</ul>


<h3>作者別</h3>

<ul>
<li>東洲斎写楽</li>
<li>喜多川歌麿</li>
<li>歌川広重</li>
<li>歌川国貞</li>
<li>歌川国芳</li>
<li>葛飾北斎</li>
<li>藤島武二</li>
<li>橋口五葉</li>
<li>浅野武二</li>
</ul>


<h3>その他</h3>

<ul>
<li>和柄</li>
<li>シンプル</li>
</ul>


<h2>主な機能</h2>

<ol>
<li>簡単操作で壁紙を保存</li>
<li>最新や人気の壁紙の一覧表示</li>
<li>作者・年代別のカテゴリ表示</li>
<li>壁紙のお気に入り追加機能</li>
<li>壁紙のサムネイル一覧表示</li>
<li>壁紙のフルスクリーン表示</li>
<li>壁紙共有機能</li>
<li>壁紙の更新通知</li>
</ol>


<h2>壁紙のサイズ</h2>

<ul>
<li>1440 × 2560ピクセル（<em>WQHD</em>）</li>
<li>1080 × 1920ピクセル（<em>FHD</em>）</li>
<li>720 × 1280ピクセル（<em>HD</em>）</li>
<li>480 × 800ピクセル（<em>WVGA</em>）</li>
<li>2560 × 1600ピクセル（<em>WQXGA</em>）</li>
<li>1200 × 1920ピクセル（<em>WUXGA</em>）</li>
</ul>


<h2>価格</h2>

<ul>
<li>無料</li>
</ul>


<h2>対応言語</h2>

<ul>
<li>日本語</li>
<li>英語</li>
<li>ロシア語</li>
<li>フランス語</li>
<li>イタリア語</li>
<li>タイ語</li>
<li>繁体中国語</li>
</ul>


<h2>著作権表記</h2>

<p>浮世絵は著作権切れの作品のみを選別し、Android用の壁紙、または作品集として一枚ずつ丹念に加工・修復しています。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iPhoneアプリ「リラックス・ヒーリング」アップデート]]></title>
    <link href="https://lab.dolice.net/blog/2015/08/13/ios-relaxing-healing/"/>
    <updated>2015-08-13T13:14:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2015/08/13/ios-relaxing-healing</id>
    <content type="html"><![CDATA[<p>ヒーリング音楽や自然の音を聴いてリラックスできる無料アプリ「<a href="https://itunes.apple.com/us/app/hearing-healing/id694492667?mt=8" title="リラックス・ヒーリング">リラックス・ヒーリング</a>」をアップデートいたしました。</p>

<p>今回のアップデートでは、デザインの全面リニューアルを実施し、他には動作速度の向上や設定項目の追加などを行いました。</p>

<p>下記よりアプリをダウンロードできますので、是非ご利用ください。</p>

<p><a href="https://geo.itunes.apple.com/jp/app/rirakkusu-hiringu-xin-liangi/id694492667?mt=8" style="display:inline-block;overflow:hidden;background:url(https://linkmaker.itunes.apple.com/images/badges/en-us/badge_appstore-lrg.svg) no-repeat;width:165px;height:40px;"></a></p>

<h2>このアプリについて</h2>

<p>α波発生に効果的なヒーリング音楽、雨音や森の中の小鳥のさえずりなどのサウンドを聴きながら、リラックスして深い眠りに就くことができます。</p>

<p>ストレスの軽減や寝付きが悪い時の対策、それから心身の疲れに効果があります。</p>

<p>ホワイトノイズも収録していますので、仕事や勉強に打ち込む時の作業用BGMにもお薦めです。</p>

<p><img src="https://lab.dolice.net/images/article/relaxing_healing/relaxing_healing_screenshot1.jpg" title="ミュージック画面" alt="ミュージック画面" /></p>

<p>5曲のヒーリング音楽と 11種の環境音を収録しています。ヒーリング音楽は全曲連続で再生したり、一曲リピートさせることもできます。現在、約1時間分のヒーリング音楽を収録しています。</p>

<p>バックグラウンド再生もサポートしていますので、他のアプリを操作しながらでも音楽やサウンドをお楽しみいただけます。</p>

<p><img src="https://lab.dolice.net/images/article/relaxing_healing/relaxing_healing_screenshot2.jpg" title="サウンド画面" alt="サウンド画面" /></p>

<p>雨音などの環境音は、設定した時間が来ると徐々に音量を下げながら停止しますので、睡眠の妨げにはなりません。</p>

<p>眠る前に、例えば小川のせせらぎなどを流したまま、リラックスした頃に知らず知らずと心地よい睡眠に入ることができます。</p>

<p><img src="https://lab.dolice.net/images/article/relaxing_healing/relaxing_healing_screenshot3.jpg" title="アラーム画面" alt="アラーム画面" /></p>

<p>目覚まし機能も搭載しており、5種類のアラーム音から選んで使用できます。音楽やサウンドを流したままアラームを設定しても、起床時刻と同時に停止するので安心です。</p>

<p><img src="https://lab.dolice.net/images/article/relaxing_healing/relaxing_healing_screenshot4.jpg" title="設定画面" alt="設定画面" /></p>

<p>設定画面では、ミュージック／サウンド／アラームの音量変更や、ミュージックのリピート設定、サウンドの再生時間設定などが行えます。</p>

<p>今回のアップデートで、アラーム使用時の画面輝度を設定できるようになり、起動時の画面も選択できるようになりました。</p>

<h2>収録内容</h2>

<p>ヒーリング音楽は下記の5曲を収録しています（4曲目と5曲目は、アプリ内から購入いただくと聴く事ができます）。</p>

<h3>ヒーリング音楽</h3>

<ol>
<li>ストレス解消ヒーリング音楽（α波）[10:25]</li>
<li>神秘的なヒーリング音楽 [16:51]</li>
<li>快適な眠りを誘う癒しの音楽（α波）[15:31]</li>
<li>体に優しい癒しの音楽 [06:34]</li>
<li>さざなみヒーリング音楽 [09:47]</li>
</ol>


<p>サウンドは下記の11項目を全て無料でお聞きいただけます。</p>

<h3>サウンド</h3>

<ol>
<li>雨音と川のせせらぎ</li>
<li>夕立の雨音</li>
<li>雰囲気に満ちた豪雨の音</li>
<li>雨とカエルの鳴き声</li>
<li>ルイジアナの雨音</li>
<li>鳥の鳴き声</li>
<li>雪解け水の音</li>
<li>波の音</li>
<li>ホワイトノイズ</li>
<li>森林浴</li>
<li>フクロウの鳴き声</li>
</ol>


<p>アラーム音は下記から好きな音を選択できます（お薦めは「アナログ目覚まし時計」です！）。</p>

<h3>アラーム音</h3>

<ol>
<li>アナログ目覚まし時計</li>
<li>デジタル目覚まし時計</li>
<li>目覚ましベル</li>
<li>ビープ音</li>
<li>警報音</li>
</ol>


<h2>主な機能</h2>

<ul>
<li>ヒーリングミュージック再生機能（5曲）</li>
<li>ヒーリングミュージックのオールプレイ機能</li>
<li>雨音や環境音の再生機能（11サウンド）</li>
<li>目覚まし機能（5種のアラーム音を搭載）</li>
</ul>


<h2>価格</h2>

<ul>
<li>無料（App内購入あり）</li>
</ul>


<h2>対応言語</h2>

<ul>
<li>日本語</li>
<li>英語</li>
</ul>


<h2>Facebook公式ページ</h2>

<ul>
<li><a href="https://www.facebook.com/dolice.hearing.healing">https://www.facebook.com/dolice.hearing.healing</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOSでアプリ内課金をする「DCInAppPurchase」クラス]]></title>
    <link href="https://lab.dolice.net/blog/2015/06/28/objc-classes-dc-in-app-purchase/"/>
    <updated>2015-06-28T12:55:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2015/06/28/objc-classes-dc-in-app-purchase</id>
    <content type="html"><![CDATA[<p>iOSでアプリ内課金をする「<a href="https://github.com/masakihirokawa/objc-classes-dc-in-app-purchase" title="DCInAppPurchase">DCInAppPurchase</a>」クラスを GitHub に公開しました。</p>

<p>購入対象のプロダクトIDと、呼び出し元のビューを渡して購入／リストア処理を行います。</p>

<p>このクラスの使用には、<em>StoreKit</em> フレームワークが必要になります。</p>

<h2>ダウンロード</h2>

<ul>
<li><a href="https://github.com/masakihirokawa/objc-classes-dc-in-app-purchase">https://github.com/masakihirokawa/objc-classes-dc-in-app-purchase</a></li>
</ul>


<h2>導入手順</h2>

<h3>1. グローバル定義</h3>

<p>プロジェクトの <em>*.pch</em> ファイルでクラスのインスタンスを定義し、どこからでも呼び出せるようグローバル化します。</p>

<h4>*.pch</h4>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cp">#import &quot;DCInAppPurchase.h&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">DCInAppPurchase</span> <span class="o">*</span><span class="n">inAppPurchase</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2. 初期化</h3>

<p><em>AppDelegate.m</em> でアプリ起動時に初期化します。</p>

<h4>AppDelegate.m</h4>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFinishLaunchingWithOptions:</span><span class="p">(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">inAppPurchase</span> <span class="o">=</span> <span class="p">[[</span><span class="n">DCInAppPurchase</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>3. アイテム付与部分の実装</h3>

<p><em>DCInAppPurchase.m</em> の 137〜142行目にある <em>provideContent</em> 内に購入完了時の処理を記述します。</p>

<h4>DCInAppPurchase.m</h4>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">provideContent:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">productIdentifier</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="c1">// TODO: ここでアイテム付与を行う</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>使用方法</h2>

<h3>アイテムの購入</h3>

<p>アイテムのプロダクトIDを渡してアイテムの購入処理を開始します。</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="p">[</span><span class="n">inAppPurchase</span> <span class="nl">startPurchase:</span><span class="s">@&quot;Product ID&quot;</span> <span class="nl">view:</span><span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<h3>アイテムのリストア</h3>

<p>アイテムのプロダクトIDを渡してアイテムのリストア処理を開始します。</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="p">[</span><span class="n">inAppPurchase</span> <span class="nl">restorePurchase:</span><span class="s">@&quot;Product ID&quot;</span> <span class="nl">view:</span><span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<p>以上が導入から使用までの流れになります。</p>

<p>2013年に作成したもののため大雑把な造りですが、現在リリース中のアプリで動作確認済みです。</p>

<h2>お薦めの参考書</h2>

<p><strong><a href="https://www.amazon.co.jp/gp/product/4797386258/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4797386258&linkCode=as2&tag=pinocchio-22">詳解 Swift 改訂版</a></strong><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=pinocchio-22&l=as2&o=9&a=4797386258" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br />
Swiftのかなり入り込んだところまで解説しながら、実践コードを多数収録しています。応用本になりますので、入門書を読み終えて中級者から上級者に差し掛かる時に読むことをお勧めします。読み物としてだけではなくリファレンスとしても使用できます。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOSアプリへの Google Analytics 導入方法]]></title>
    <link href="https://lab.dolice.net/blog/2015/06/26/ios-google-analytics/"/>
    <updated>2015-06-26T12:53:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2015/06/26/ios-google-analytics</id>
    <content type="html"><![CDATA[<p>iOSアプリに Google Analytics を導入する方法を以下に記載します。</p>

<p>当記事では、カスタムクラスを使用してスクリーントラッキングとイベントトラッキングを行っています。</p>

<h2>導入手順</h2>

<h3>1. Google Analytics SDKのダウンロード</h3>

<p><a href="https://developers.google.com/analytics/devguides/collection/ios/resources?hl=ja" title="Downloads - iOS SDK | Google Analytics | Google Developers">Downloads - iOS SDK | Google Analytics | Google Developers</a> より最新のSDKをダウンロードし、プロジェクトに追加します。</p>

<ul>
<li><a href="https://developers.google.com/analytics/devguides/collection/ios/resources?hl=ja">https://developers.google.com/analytics/devguides/collection/ios/resources?hl=ja</a></li>
</ul>


<h3>2. フレームワークの追加</h3>

<p>下記 5つのフレームワークをプロジェクトに追加します。</p>

<ul>
<li>libsqlite3.0.dylib</li>
<li>libz.dylib</li>
<li>SystemConfiguration.framework</li>
<li>CoreData.framework</li>
<li>AdSupport.framework</li>
</ul>


<h3>3. カスタムクラスの追加</h3>

<p>下記のカスタムクラスをプロジェクトに追加します。</p>

<h4>TrackingManager.h</h4>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cp">#import &lt;Foundation/Foundation.h&gt;</span>
</span><span class='line'><span class="cp">#import &quot;GAI.h&quot;</span>
</span><span class='line'><span class="cp">#import &quot;GAIFields.h&quot;</span>
</span><span class='line'><span class="cp">#import &quot;GAIDictionaryBuilder.h&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@interface</span> <span class="nc">TrackingManager</span> : <span class="nc">NSObject</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#pragma mark - public method</span>
</span><span class='line'><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">sendScreenTracking:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">screenName</span><span class="p">;</span>
</span><span class='line'><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">sendEventTracking:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">category</span> <span class="nf">action:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">action</span> <span class="nf">label:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">label</span> <span class="nf">value:</span><span class="p">(</span><span class="n">NSNumber</span> <span class="o">*</span><span class="p">)</span><span class="nv">value</span> <span class="nf">screen:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">screen</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<h4>TrackingManager.m</h4>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cp">#import &quot;TrackingManager.h&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@implementation</span> <span class="nc">TrackingManager</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// スクリーン名を GoogleAnalyticsに送信する</span>
</span><span class='line'><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">sendScreenTracking:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">screenName</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">id</span><span class="o">&lt;</span><span class="n">GAITracker</span><span class="o">&gt;</span> <span class="n">tracker</span> <span class="o">=</span> <span class="p">[[</span><span class="n">GAI</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="n">defaultTracker</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// スクリーン名を設定</span>
</span><span class='line'>    <span class="p">[</span><span class="n">tracker</span> <span class="nl">set:</span><span class="n">kGAIScreenName</span> <span class="nl">value:</span><span class="n">screenName</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// トラッキング情報を送信する</span>
</span><span class='line'>    <span class="p">[</span><span class="n">tracker</span> <span class="nl">send:</span><span class="p">[[</span><span class="n">GAIDictionaryBuilder</span> <span class="n">createScreenView</span><span class="p">]</span> <span class="n">build</span><span class="p">]];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// 送信が終わったらtrackerに設定されているスクリーン名を初期化する</span>
</span><span class='line'>    <span class="p">[</span><span class="n">tracker</span> <span class="nl">set:</span><span class="n">kGAIScreenName</span> <span class="nl">value:</span><span class="nb">nil</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// イベントを GoogleAnalyticsに送信する</span>
</span><span class='line'><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">sendEventTracking:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">category</span> <span class="nf">action:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">action</span> <span class="nf">label:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">label</span> <span class="nf">value:</span><span class="p">(</span><span class="n">NSNumber</span> <span class="o">*</span><span class="p">)</span><span class="nv">value</span> <span class="nf">screen:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">screen</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">id</span><span class="o">&lt;</span><span class="n">GAITracker</span><span class="o">&gt;</span> <span class="n">tracker</span> <span class="o">=</span> <span class="p">[[</span><span class="n">GAI</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="n">defaultTracker</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// スクリーン名を設定</span>
</span><span class='line'>    <span class="p">[</span><span class="n">tracker</span> <span class="nl">set:</span><span class="n">kGAIScreenName</span> <span class="nl">value:</span><span class="n">screen</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// イベントのトラッキング情報を送信する</span>
</span><span class='line'>    <span class="p">[</span><span class="n">tracker</span> <span class="nl">send:</span><span class="p">[[</span><span class="n">GAIDictionaryBuilder</span> <span class="nl">createEventWithCategory:</span><span class="n">category</span> <span class="nl">action:</span><span class="n">action</span> <span class="nl">label:</span><span class="n">label</span> <span class="nl">value:</span><span class="n">value</span><span class="p">]</span> <span class="n">build</span><span class="p">]];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>4. 初期化</h3>

<p><em>AppDelegate</em> のヘッダファイルに <em>GAI.h</em> をインポートし、実装ファイルのアプリケーション起動時の部分でトラッキングIDを指定し初期化します。</p>

<h4>AppDelegate.h</h4>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cp">#import &quot;GAI.h&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@interface</span> <span class="nc">AppDelegate</span> : <span class="nc">UIResponder</span> <span class="o">&lt;</span><span class="n">UIApplicationDelegate</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<h4>AppDelegate.m</h4>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFinishLaunchingWithOptions:</span><span class="p">(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="c1">// Optional: automatically send uncaught exceptions to Google Analytics.</span>
</span><span class='line'>    <span class="p">[</span><span class="n">GAI</span> <span class="n">sharedInstance</span><span class="p">].</span><span class="n">trackUncaughtExceptions</span> <span class="o">=</span> <span class="n">YES</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Optional: set Google Analytics dispatch interval to e.g. 20 seconds.</span>
</span><span class='line'>    <span class="p">[</span><span class="n">GAI</span> <span class="n">sharedInstance</span><span class="p">].</span><span class="n">dispatchInterval</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Optional: set Logger to VERBOSE for debug information.</span>
</span><span class='line'>    <span class="p">[[[</span><span class="n">GAI</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="n">logger</span><span class="p">]</span> <span class="nl">setLogLevel:</span><span class="n">kGAILogLevelNone</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Initialize tracker. Replace with your tracking ID.</span>
</span><span class='line'>    <span class="p">[[</span><span class="n">GAI</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="nl">trackerWithTrackingId:</span><span class="s">@&quot;Your Tracking ID&quot;</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">YES</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>使用方法</h2>

<h3>1. カスタムクラスの読み込み</h3>

<p>ビューコントローラのヘッダファイルに <em>TrackingManager.h</em> をインポートします。</p>

<h4>SampleViewController.h</h4>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cp">#import &quot;TrackingManager.h&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@interface</span> <span class="nc">SampleViewController</span> : <span class="nc">UIViewController</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2-a. スクリーントラッキング</h3>

<p>実装ファイルの <em>viewWillAppear</em> 内でスクリーントラッキングを行います。</p>

<h4>SampleViewController.m</h4>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewWillAppear:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">animated</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">super</span> <span class="nl">viewWillAppear:</span><span class="n">animated</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Google Analytics スクリーントラッキング</span>
</span><span class='line'>    <span class="n">NSString</span> <span class="o">*</span><span class="n">screenName</span> <span class="o">=</span> <span class="n">NSStringFromClass</span><span class="p">([</span><span class="n">self</span> <span class="n">class</span><span class="p">]);</span>
</span><span class='line'>    <span class="p">[</span><span class="n">TrackingManager</span> <span class="nl">sendScreenTracking:</span><span class="n">screenName</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2-b. イベントトラッキング</h3>

<p>例えばボタンをタップした際などにイベントトラッキングを行います。</p>

<p>指定できるのは「カテゴリ」「アクション」「ラベル」「値」「スクリーン名」の 5つで、詳細を正確に指定することにより、コンバージョンの設定が容易になります。</p>

<h4>SampleViewController.m</h4>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">buttonTapEvent:</span><span class="p">(</span><span class="n">UIButton</span> <span class="o">*</span><span class="p">)</span><span class="nv">button</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="c1">// Google Analytics イベントトラッキング</span>
</span><span class='line'>    <span class="n">NSString</span> <span class="o">*</span><span class="n">screenName</span> <span class="o">=</span> <span class="n">NSStringFromClass</span><span class="p">([</span><span class="n">self</span> <span class="n">class</span><span class="p">]);</span>
</span><span class='line'>    <span class="p">[</span><span class="n">TrackingManager</span> <span class="nl">sendEventTracking:</span><span class="s">@&quot;Button&quot;</span> <span class="nl">action:</span><span class="s">@&quot;Tap&quot;</span>
</span><span class='line'>                                 <span class="nl">label:</span><span class="s">@&quot;Label&quot;</span> <span class="nl">value:</span><span class="mi">1</span> <span class="nl">screen:</span><span class="n">screenName</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>以上で iOSアプリへの Google Analytics 導入は完了になります。</p>

<h2>補足</h2>

<p>もし正常に動作しない場合は、ビルド設定の <em>Other Linker Flags</em> に「<em>-ObjC</em>」を追加してください。</p>

<h2>お薦めの参考書</h2>

<p><strong><a href="https://www.amazon.co.jp/gp/product/4797386258/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4797386258&linkCode=as2&tag=pinocchio-22">詳解 Swift 改訂版</a></strong><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=pinocchio-22&l=as2&o=9&a=4797386258" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br />
Swiftのかなり入り込んだところまで解説しながら、実践コードを多数収録しています。応用本になりますので、入門書を読み終えて中級者から上級者に差し掛かる時に読むことをお勧めします。読み物としてだけではなくリファレンスとしても使用できます。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[配列のループ化（iOS/Android）]]></title>
    <link href="https://lab.dolice.net/blog/2015/06/25/ios-android-array-loop/"/>
    <updated>2015-06-25T10:45:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2015/06/25/ios-android-array-loop</id>
    <content type="html"><![CDATA[<p>iOS/Androidアプリで配列をループ化し取得する方法を以下に記載します。</p>

<p>下記のサンプルでは、配列を指定したインデックスを先頭に、それより前の要素を後ろの方に追加することでループ化しています。</p>

<h2>サンプルソースコード</h2>

<h3>iOS</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">NSArray</span> <span class="o">*</span><span class="p">)</span><span class="nf">loopArray:</span><span class="p">(</span><span class="n">NSArray</span> <span class="o">*</span><span class="p">)</span><span class="nv">list</span> <span class="nf">index:</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nv">index</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">NSMutableArray</span> <span class="o">*</span><span class="n">loopList</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSMutableArray</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithArray:</span><span class="n">list</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// 指定したインデックスより前のリストを保持</span>
</span><span class='line'>    <span class="n">NSMutableArray</span> <span class="o">*</span><span class="n">frontList</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSMutableArray</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">index</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="p">[</span><span class="n">frontList</span> <span class="nl">addObject:</span><span class="n">loopList</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// 新しいリストを生成</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="p">[</span><span class="n">frontList</span> <span class="n">count</span><span class="p">];</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="p">[</span><span class="n">loopList</span> <span class="nl">removeObjectAtIndex:</span><span class="mi">0</span><span class="p">];</span>
</span><span class='line'>        <span class="p">[</span><span class="n">loopList</span> <span class="nl">addObject:</span><span class="n">frontList</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">loopList</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>使用方法</h4>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="c1">// 基の配列を生成</span>
</span><span class='line'><span class="n">NSArray</span> <span class="o">*</span><span class="n">originalList</span> <span class="o">=</span> <span class="err">@</span><span class="p">[</span><span class="err">@</span><span class="mi">111</span><span class="p">,</span> <span class="err">@</span><span class="mi">222</span><span class="p">,</span> <span class="err">@</span><span class="mi">333</span><span class="p">,</span> <span class="err">@</span><span class="mi">444</span><span class="p">,</span> <span class="err">@</span><span class="mi">555</span><span class="p">,</span> <span class="err">@</span><span class="mi">666</span><span class="p">,</span> <span class="err">@</span><span class="mi">777</span><span class="p">,</span> <span class="err">@</span><span class="mi">888</span><span class="p">,</span> <span class="err">@</span><span class="mi">999</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// 配列をループ化し取得</span>
</span><span class='line'><span class="n">NSArray</span> <span class="o">*</span><span class="n">loopList</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span> <span class="nl">loopArray:</span><span class="n">originalList</span> <span class="nl">index:</span><span class="mi">4</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// 出力</span>
</span><span class='line'><span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;%@&quot;</span><span class="p">,</span> <span class="n">loopList</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<h4>出力結果</h4>

<blockquote><p>555, 666, 777, 888, 999, 111, 222, 333, 444</p></blockquote>

<h3>Android</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">getLoopIntegerList</span><span class="o">(</span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">,</span> <span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="c1">// 指定したインデックスより前のリストを保持</span>
</span><span class='line'>    <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">frontList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;();</span>
</span><span class='line'>    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">index</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">frontList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">));</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// 新しいリストを生成</span>
</span><span class='line'>    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">frontList</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">list</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
</span><span class='line'>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">frontList</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">));</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">list</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>使用方法</h4>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="c1">// 基の配列を生成</span>
</span><span class='line'><span class="n">Int</span><span class="o">[]</span> <span class="n">intList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Int</span><span class="o">[]</span> <span class="o">{</span> <span class="mi">111</span><span class="o">,</span> <span class="mi">222</span><span class="o">,</span> <span class="mi">333</span><span class="o">,</span> <span class="mi">444</span><span class="o">,</span> <span class="mi">555</span><span class="o">,</span> <span class="mi">666</span><span class="o">,</span> <span class="mi">777</span><span class="o">,</span> <span class="mi">888</span><span class="o">,</span> <span class="mi">999</span> <span class="o">};</span>
</span><span class='line'><span class="n">Integer</span><span class="o">[]</span> <span class="n">integerList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">[</span><span class="n">intList</span><span class="o">.</span><span class="na">length</span><span class="o">];</span>
</span><span class='line'><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
</span><span class='line'><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">value</span> <span class="o">:</span> <span class="n">intList</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">integerList</span><span class="o">[</span><span class="n">i</span><span class="o">++]</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">originalList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">integerList</span><span class="o">));</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// 配列をループ化し取得</span>
</span><span class='line'><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">loopList</span> <span class="o">=</span> <span class="n">getLoopIntegerList</span><span class="o">(</span><span class="n">originalList</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// 出力</span>
</span><span class='line'><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">value</span> <span class="o">:</span> <span class="n">loopList</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="s">&quot;loopList&quot;</span><span class="o">,</span> <span class="s">&quot;&quot;</span> <span class="o">+</span> <span class="n">value</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>出力結果</h4>

<blockquote><p>555, 666, 777, 888, 999, 111, 222, 333, 444</p></blockquote>

<h2>お薦めの参考書</h2>

<p><strong><a href="https://www.amazon.co.jp/gp/product/4797386258/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4797386258&linkCode=as2&tag=pinocchio-22">詳解 Swift 改訂版</a></strong><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=pinocchio-22&l=as2&o=9&a=4797386258" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br />
Swiftのかなり入り込んだところまで解説しながら、実践コードを多数収録しています。応用本になりますので、入門書を読み終えて中級者から上級者に差し掛かる時に読むことをお勧めします。読み物としてだけではなくリファレンスとしても使用できます。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Androidアプリで画像とテキストを共有する方法]]></title>
    <link href="https://lab.dolice.net/blog/2015/06/25/android-share-compat/"/>
    <updated>2015-06-25T10:20:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2015/06/25/android-share-compat</id>
    <content type="html"><![CDATA[<p>Androidアプリで画像とテキストを共有する方法を以下に記載します。</p>

<p>下記のサンプルでは、<em>ShareCompat</em> を使用して画像とテキストを共有しています。</p>

<p>画像を共有する場合は画像の URIを指定する必要があり、URIの取得方法については後日別の記事で解説します。</p>

<h2>サンプルソースコード</h2>

<h3>テキストの共有</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">shareText</span><span class="o">(</span><span class="n">Activity</span> <span class="n">activity</span><span class="o">,</span> <span class="n">String</span> <span class="n">chooserTitle</span><span class="o">,</span> <span class="n">String</span> <span class="n">subject</span><span class="o">,</span> <span class="n">String</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">ShareCompat</span><span class="o">.</span><span class="na">IntentBuilder</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">ShareCompat</span><span class="o">.</span><span class="na">IntentBuilder</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">activity</span><span class="o">);</span>
</span><span class='line'>    <span class="n">builder</span><span class="o">.</span><span class="na">setChooserTitle</span><span class="o">(</span><span class="n">chooserTitle</span><span class="o">);</span>
</span><span class='line'>    <span class="n">builder</span><span class="o">.</span><span class="na">setSubject</span><span class="o">(</span><span class="n">subject</span><span class="o">);</span>
</span><span class='line'>    <span class="n">builder</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">text</span><span class="o">);</span>
</span><span class='line'>    <span class="n">builder</span><span class="o">.</span><span class="na">setType</span><span class="o">(</span><span class="s">&quot;text/plain&quot;</span><span class="o">);</span>
</span><span class='line'>    <span class="n">builder</span><span class="o">.</span><span class="na">startChooser</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">shareText</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="s">&quot;共有枠のタイトル&quot;</span><span class="o">,</span> <span class="s">&quot;共有タイトル&quot;</span><span class="o">,</span> <span class="s">&quot;共有テキスト&quot;</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<h3>画像の共有</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">shareImage</span><span class="o">(</span><span class="n">Activity</span> <span class="n">activity</span><span class="o">,</span> <span class="n">String</span> <span class="n">chooserTitle</span><span class="o">,</span> <span class="n">String</span> <span class="n">subject</span><span class="o">,</span> <span class="n">Uri</span> <span class="n">uri</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">ShareCompat</span><span class="o">.</span><span class="na">IntentBuilder</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">ShareCompat</span><span class="o">.</span><span class="na">IntentBuilder</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">activity</span><span class="o">);</span>
</span><span class='line'>    <span class="n">builder</span><span class="o">.</span><span class="na">setChooserTitle</span><span class="o">(</span><span class="n">chooserTitle</span><span class="o">);</span>
</span><span class='line'>    <span class="n">builder</span><span class="o">.</span><span class="na">setSubject</span><span class="o">(</span><span class="n">subject</span><span class="o">);</span>
</span><span class='line'>    <span class="n">builder</span><span class="o">.</span><span class="na">setStream</span><span class="o">(</span><span class="n">uri</span><span class="o">);</span>
</span><span class='line'>    <span class="n">builder</span><span class="o">.</span><span class="na">setType</span><span class="o">(</span><span class="s">&quot;image/jpeg&quot;</span><span class="o">);</span>
</span><span class='line'>    <span class="n">builder</span><span class="o">.</span><span class="na">startChooser</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">shareImage</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="s">&quot;共有枠のタイトル&quot;</span><span class="o">,</span> <span class="s">&quot;共有タイトル&quot;</span><span class="o">,</span> <span class="err">ビットマップ画像の</span><span class="n">URI</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<h3>画像とテキストの共有</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">shareImageAndText</span><span class="o">(</span><span class="n">Activity</span> <span class="n">activity</span><span class="o">,</span> <span class="n">String</span> <span class="n">chooserTitle</span><span class="o">,</span> <span class="n">String</span> <span class="n">subject</span><span class="o">,</span> <span class="n">String</span> <span class="n">text</span><span class="o">,</span> <span class="n">Uri</span> <span class="n">uri</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">ShareCompat</span><span class="o">.</span><span class="na">IntentBuilder</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">ShareCompat</span><span class="o">.</span><span class="na">IntentBuilder</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">activity</span><span class="o">);</span>
</span><span class='line'>    <span class="n">builder</span><span class="o">.</span><span class="na">setChooserTitle</span><span class="o">(</span><span class="n">chooserTitle</span><span class="o">);</span>
</span><span class='line'>    <span class="n">builder</span><span class="o">.</span><span class="na">setSubject</span><span class="o">(</span><span class="n">subject</span><span class="o">);</span>
</span><span class='line'>    <span class="n">builder</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">text</span><span class="o">);</span>
</span><span class='line'>    <span class="n">builder</span><span class="o">.</span><span class="na">setStream</span><span class="o">(</span><span class="n">uri</span><span class="o">);</span>
</span><span class='line'>    <span class="n">builder</span><span class="o">.</span><span class="na">setType</span><span class="o">(</span><span class="s">&quot;image/jpeg&quot;</span><span class="o">);</span>
</span><span class='line'>    <span class="n">builder</span><span class="o">.</span><span class="na">startChooser</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">shareImageAndText</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="s">&quot;共有枠のタイトル&quot;</span><span class="o">,</span> <span class="s">&quot;共有タイトル&quot;</span><span class="o">,</span> <span class="s">&quot;共有テキスト&quot;</span><span class="o">,</span> <span class="err">ビットマップ画像の</span><span class="n">URI</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[タブレット端末の判定]]></title>
    <link href="https://lab.dolice.net/blog/2015/06/24/android-decision-tablet/"/>
    <updated>2015-06-24T13:37:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2015/06/24/android-decision-tablet</id>
    <content type="html"><![CDATA[<p>Androidアプリでタブレット端末であるか判定するコードを以下に記載します。</p>

<p>下記のサンプルでは、画面サイズが 6インチより大きい場合にタブレット端末であると判定しています。</p>

<h2>サンプルソースコード</h2>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isTablet</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">WindowManager</span> <span class="n">windowManager</span> <span class="o">=</span> <span class="o">(</span><span class="n">WindowManager</span><span class="o">)</span><span class="n">context</span><span class="o">.</span><span class="na">getSystemService</span><span class="o">(</span><span class="n">Context</span><span class="o">.</span><span class="na">WINDOW_SERVICE</span><span class="o">);</span>
</span><span class='line'>    <span class="n">Display</span> <span class="n">display</span> <span class="o">=</span> <span class="n">windowManager</span><span class="o">.</span><span class="na">getDefaultDisplay</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">DisplayMetrics</span> <span class="n">metrics</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DisplayMetrics</span><span class="o">();</span>
</span><span class='line'>    <span class="n">display</span><span class="o">.</span><span class="na">getMetrics</span><span class="o">(</span><span class="n">metrics</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">double</span> <span class="n">inchX</span> <span class="o">=</span> <span class="n">metrics</span><span class="o">.</span><span class="na">widthPixels</span> <span class="o">/</span> <span class="n">metrics</span><span class="o">.</span><span class="na">xdpi</span><span class="o">;</span>
</span><span class='line'>    <span class="kt">double</span> <span class="n">inchY</span> <span class="o">=</span> <span class="n">metrics</span><span class="o">.</span><span class="na">heightPixels</span> <span class="o">/</span> <span class="n">metrics</span><span class="o">.</span><span class="na">ydpi</span><span class="o">;</span>
</span><span class='line'>    <span class="kt">double</span> <span class="n">inch</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">sqrt</span><span class="o">((</span><span class="n">inchX</span> <span class="o">*</span> <span class="n">inchX</span><span class="o">)</span> <span class="o">+</span> <span class="o">(</span><span class="n">inchY</span> <span class="o">*</span> <span class="n">inchY</span><span class="o">));</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">inch</span> <span class="o">&gt;</span> <span class="mi">6</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>お薦めの参考書</h2>

<p><strong><a href="https://www.amazon.co.jp/gp/product/4797386258/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4797386258&linkCode=as2&tag=pinocchio-22">詳解 Swift 改訂版</a></strong><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=pinocchio-22&l=as2&o=9&a=4797386258" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br />
Swiftのかなり入り込んだところまで解説しながら、実践コードを多数収録しています。応用本になりますので、入門書を読み終えて中級者から上級者に差し掛かる時に読むことをお勧めします。読み物としてだけではなくリファレンスとしても使用できます。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Androidアプリへの AdMob インタースティシャル広告導入]]></title>
    <link href="https://lab.dolice.net/blog/2015/05/04/android-admob-interstitial-ad/"/>
    <updated>2015-05-04T10:13:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2015/05/04/android-admob-interstitial-ad</id>
    <content type="html"><![CDATA[<p>Androidアプリに <a href="https://apps.admob.com/" title="AdMob">AdMob</a> のインタースティシャル広告を導入するサンプルを作成しました。</p>

<p>下記のサンプルでは、アプリがスリープ状態から復帰した時と、画面が再度読み込まれた時に全面広告が表示されます。</p>

<h2>サンプルダウンロード</h2>

<ul>
<li><a href="https://github.com/masakihirokawa/android-admob-interstitial-ad">https://github.com/masakihirokawa/android-admob-interstitial-ad</a></li>
</ul>


<h2>公式ドキュメント</h2>

<ul>
<li><a href="https://developers.google.com/mobile-ads-sdk/docs/admob/android/interstitial?hl=ja">https://developers.google.com/mobile-ads-sdk/docs/admob/android/interstitial?hl=ja</a></li>
</ul>


<h2>導入手順</h2>

<h3>1. Google Play Services SDK の読み込み</h3>

<p><em>build.gradle</em> から <strong>Google Play Services SDK</strong> を読み込みます。バージョンは最新版を指定してください。</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>dependencies {
</span><span class='line'>    // 省略
</span><span class='line'>    compile &#39;com.google.android.gms:play-services:7.3.0&#39;
</span><span class='line'>}
</span></code></pre></td></tr></table></div></figure>


<h3>2. AdMob 広告ユニットID の指定</h3>

<p><em>AdMobIntersBanner.java</em> の14行目で広告ユニットID を指定します。</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">INTERS_AD_UNIT_ID</span> <span class="o">=</span> <span class="s">&quot;Your AdMob Ad unit ID&quot;</span><span class="o">;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>3. デバッグモードの指定</h3>

<p><em>AdMobIntersBanner.java</em> の15行目でデバッグモードをオンにしてください。</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">DEBUG_MODE</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>4. テスト端末のデバイスID を指定</h3>

<p><em>AdMobIntersBanner.java</em> の17行目でテスト端末のデバイスID を指定します。</p>

<p>デバイスIDは、実機で一度広告を表示すると Android Studio の <em>LogCat</em> に表示されます。</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">DEBUG_DEVICE_ID</span> <span class="o">=</span> <span class="o">{</span>
</span><span class='line'>    <span class="s">&quot;Your test device ID&quot;</span>
</span><span class='line'><span class="o">};</span>
</span></code></pre></td></tr></table></div></figure>


<h3>5. テスト端末の追加</h3>

<p><em>AdMobIntersBanner.java</em> の51行目にあるコメントアウトを外し、テスト端末を追加します。</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">adRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AdRequest</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
</span><span class='line'>        <span class="o">.</span><span class="na">addTestDevice</span><span class="o">(</span><span class="n">AdRequest</span><span class="o">.</span><span class="na">DEVICE_ID_EMULATOR</span><span class="o">)</span>
</span><span class='line'>        <span class="o">.</span><span class="na">addTestDevice</span><span class="o">(</span><span class="n">DEBUG_DEVICE_ID</span><span class="o">[</span><span class="mi">0</span><span class="o">])</span>
</span><span class='line'>        <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>下記に実装サンプルを記載します。導入の際のご参考になれば幸いです。</p>

<h2>サンプルソースコード</h2>

<h3>MainActivity.java</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">net</span><span class="o">.</span><span class="na">dolice</span><span class="o">.</span><span class="na">admobinterstitialadex</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.app.Activity</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">net.dolice.ad.AdMobIntersBanner</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span> <span class="n">AdMobIntersBanner</span> <span class="n">mIntersAd</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@Override</span>
</span><span class='line'>    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
</span><span class='line'>        <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// 全面広告の読み込み</span>
</span><span class='line'>        <span class="n">preloadInterstitialAd</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// 全面広告の読み込み</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">preloadInterstitialAd</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">mIntersAd</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AdMobIntersBanner</span><span class="o">();</span>
</span><span class='line'>        <span class="n">mIntersAd</span><span class="o">.</span><span class="na">preload</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// 全面広告が読み込み完了していれば表示</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">showInterstitialAd</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="c1">// 全面広告表示</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">mIntersAd</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">mIntersAd</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@Override</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onRestart</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="kd">super</span><span class="o">.</span><span class="na">onRestart</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// 全面広告が読み込み完了していれば表示</span>
</span><span class='line'>        <span class="n">showInterstitialAd</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>AdMobIntersBanner.java</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">net</span><span class="o">.</span><span class="na">dolice</span><span class="o">.</span><span class="na">ad</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.content.Context</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">com.google.android.gms.ads.AdRequest</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">com.google.android.gms.ads.InterstitialAd</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> * Created by Dolice on 15/03/19.</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AdMobIntersBanner</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span> <span class="n">InterstitialAd</span> <span class="n">mIntersAd</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">INTERS_AD_UNIT_ID</span> <span class="o">=</span> <span class="s">&quot;Your AdMob Ad unit ID&quot;</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">DEBUG_MODE</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">DEBUG_DEVICE_ID</span> <span class="o">=</span> <span class="o">{</span>
</span><span class='line'>            <span class="s">&quot;Your test device ID&quot;</span>
</span><span class='line'>    <span class="o">};</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * 全面広告のプリロード</span>
</span><span class='line'><span class="cm">     * @param context</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">preload</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">mIntersAd</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InterstitialAd</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
</span><span class='line'>        <span class="n">mIntersAd</span><span class="o">.</span><span class="na">setAdUnitId</span><span class="o">(</span><span class="n">INTERS_AD_UNIT_ID</span><span class="o">);</span>
</span><span class='line'>        <span class="n">mIntersAd</span><span class="o">.</span><span class="na">loadAd</span><span class="o">(</span><span class="n">getAdRequest</span><span class="o">());</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * 全面広告の表示</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">show</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">mIntersAd</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="k">return</span><span class="o">;</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">mIntersAd</span><span class="o">.</span><span class="na">isLoaded</span><span class="o">())</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">mIntersAd</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * 広告リクエストの取得</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">private</span> <span class="n">AdRequest</span> <span class="nf">getAdRequest</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">AdRequest</span> <span class="n">adRequest</span><span class="o">;</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">DEBUG_MODE</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">adRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AdRequest</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
</span><span class='line'>                    <span class="o">.</span><span class="na">addTestDevice</span><span class="o">(</span><span class="n">AdRequest</span><span class="o">.</span><span class="na">DEVICE_ID_EMULATOR</span><span class="o">)</span>
</span><span class='line'>                    <span class="c1">//.addTestDevice(DEBUG_DEVICE_ID[0])</span>
</span><span class='line'>                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</span><span class='line'>        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">adRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AdRequest</span><span class="o">.</span><span class="na">Builder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">adRequest</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>以上で AdMob インタースティシャル広告の導入は完了になります。</p>

<p><a href="https://developers.google.com/mobile-ads-sdk/docs/admob/android/interstitial?hl=ja" title="公式ドキュメント">公式ドキュメント</a>に解りやすくサンプルが掲載されていますので、そちらも参考にされると良いかもしれません。</p>

<h2>お薦めの参考書</h2>

<p><strong><a href="https://www.amazon.co.jp/gp/product/4797386258/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4797386258&linkCode=as2&tag=pinocchio-22">詳解 Swift 改訂版</a></strong><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=pinocchio-22&l=as2&o=9&a=4797386258" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br />
Swiftのかなり入り込んだところまで解説しながら、実践コードを多数収録しています。応用本になりますので、入門書を読み終えて中級者から上級者に差し掛かる時に読むことをお勧めします。読み物としてだけではなくリファレンスとしても使用できます。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[画像を SDカードに保存する]]></title>
    <link href="https://lab.dolice.net/blog/2015/05/04/android-save-image/"/>
    <updated>2015-05-04T09:30:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2015/05/04/android-save-image</id>
    <content type="html"><![CDATA[<p>Androidアプリでビットマップ画像を SDカードに保存するサンプルを作成しました。</p>

<p>下記よりサンプルをダウンロードできます。</p>

<h2>サンプルダウンロード</h2>

<ul>
<li><a href="https://github.com/masakihirokawa/android-save-image">https://github.com/masakihirokawa/android-save-image</a></li>
</ul>


<h2>導入手順</h2>

<h3>1. パーミッションの追加</h3>

<p><em>AndroidManifest.xml</em> にメディアストレージへのアクセスを許可する権限を追加します。</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span> <span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2. ImageManager クラスの組み込み</h3>

<p>画像の保存などを行うクラス <em>ImageManager.java</em> を「<em>/app/src/main/java/net/dolice/image/</em>」ディレクトリに配置します。</p>

<h3>3. 保存対象のビットマップ画像を取得</h3>

<p>保存したい画像をビットマップ形式で取得します。下記の例では、イメージビューからビットマップを取得しています。</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="c1">// イメージビューからビットマップを取得</span>
</span><span class='line'><span class="n">ImageView</span> <span class="n">sampleImageView</span> <span class="o">=</span> <span class="o">(</span><span class="n">ImageView</span><span class="o">)</span><span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">image</span><span class="o">);</span>
</span><span class='line'><span class="n">Bitmap</span> <span class="n">sampleImage</span> <span class="o">=</span> <span class="o">((</span><span class="n">BitmapDrawable</span><span class="o">)</span><span class="n">sampleImageView</span><span class="o">.</span><span class="na">getDrawable</span><span class="o">()).</span><span class="na">getBitmap</span><span class="o">();</span>
</span></code></pre></td></tr></table></div></figure>


<h3>4. 画像の保存を実行</h3>

<p>ボタンのタップイベント等から <em>ImageManager</em> クラスを呼び出し、画像の保存を実行します。</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="c1">// ビットマップを SDカードに保存</span>
</span><span class='line'><span class="n">ImageManager</span> <span class="n">imageManager</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ImageManager</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
</span><span class='line'><span class="k">try</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">String</span> <span class="n">albumName</span> <span class="o">=</span> <span class="s">&quot;Save image sample&quot;</span><span class="o">;</span>
</span><span class='line'>    <span class="n">imageManager</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">sampleImage</span><span class="o">,</span> <span class="n">albumName</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Error</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">&quot;MainActivity&quot;</span><span class="o">,</span> <span class="s">&quot;onCreate: &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>下記に実装サンプルを記載します。</p>

<p>サンプルでは、画像の上に敷いてある透明なボタンをタップで、フォトアルバムを作成し画像を保存しています。</p>

<p>SDカードが必要であるのと、フォトアルバムへの反映のため <em>ContentResolver</em> を介してギャラリーに追加する必要がある点にご注意ください。</p>

<h2>サンプルソースコード</h2>

<h3>activity_main.xml</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;RelativeLayout</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
</span><span class='line'>    <span class="na">xmlns:tools=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
</span><span class='line'>    <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>    <span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>    <span class="na">tools:context=</span><span class="s">&quot;.MainActivity&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;ImageView</span>
</span><span class='line'>        <span class="na">android:id=</span><span class="s">&quot;@+id/image&quot;</span>
</span><span class='line'>        <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>        <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>        <span class="na">android:src=</span><span class="s">&quot;@drawable/sample_image&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;Button</span>
</span><span class='line'>        <span class="na">android:id=</span><span class="s">&quot;@+id/button&quot;</span>
</span><span class='line'>        <span class="na">android:layout_width=</span><span class="s">&quot;fill_parent&quot;</span>
</span><span class='line'>        <span class="na">android:layout_height=</span><span class="s">&quot;fill_parent&quot;</span>
</span><span class='line'>        <span class="na">android:background=</span><span class="s">&quot;@null&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;/RelativeLayout&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>MainActivity.java</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">net</span><span class="o">.</span><span class="na">dolice</span><span class="o">.</span><span class="na">saveimageex</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.app.Activity</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.graphics.Bitmap</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.graphics.drawable.BitmapDrawable</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.util.Log</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.view.View</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.widget.Button</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.widget.ImageView</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.widget.Toast</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">net.dolice.image.ImageManager</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@Override</span>
</span><span class='line'>    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
</span><span class='line'>        <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// 画像保存ボタン定義</span>
</span><span class='line'>        <span class="n">Button</span> <span class="n">sampleButton</span> <span class="o">=</span> <span class="o">(</span><span class="n">Button</span><span class="o">)</span><span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">button</span><span class="o">);</span>
</span><span class='line'>        <span class="n">sampleButton</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>            <span class="nd">@Override</span>
</span><span class='line'>            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>                <span class="c1">// 画像保存</span>
</span><span class='line'>                <span class="n">saveImage</span><span class="o">();</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>        <span class="o">});</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// 画像保存</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">saveImage</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="c1">// イメージビューからビットマップ保持</span>
</span><span class='line'>        <span class="n">ImageView</span> <span class="n">sampleImageView</span> <span class="o">=</span> <span class="o">(</span><span class="n">ImageView</span><span class="o">)</span><span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">image</span><span class="o">);</span>
</span><span class='line'>        <span class="n">Bitmap</span> <span class="n">sampleImage</span> <span class="o">=</span> <span class="o">((</span><span class="n">BitmapDrawable</span><span class="o">)</span><span class="n">sampleImageView</span><span class="o">.</span><span class="na">getDrawable</span><span class="o">()).</span><span class="na">getBitmap</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// ビットマップを SDカードに保存</span>
</span><span class='line'>        <span class="n">ImageManager</span> <span class="n">imageManager</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ImageManager</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
</span><span class='line'>        <span class="k">try</span> <span class="o">{</span>
</span><span class='line'>            <span class="c1">// 画像の保存実行</span>
</span><span class='line'>            <span class="n">String</span> <span class="n">albumName</span> <span class="o">=</span> <span class="s">&quot;Save image sample&quot;</span><span class="o">;</span>
</span><span class='line'>            <span class="n">imageManager</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">sampleImage</span><span class="o">,</span> <span class="n">albumName</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Error</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">&quot;MainActivity&quot;</span><span class="o">,</span> <span class="s">&quot;onCreate: &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>            <span class="c1">// 画像の保存失敗メッセージ表示</span>
</span><span class='line'>            <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="s">&quot;SDカードに保存できませんでした&quot;</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
</span><span class='line'>        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
</span><span class='line'>            <span class="c1">// 画像の保存完了メッセージ表示</span>
</span><span class='line'>            <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="s">&quot;SDカードに保存しました&quot;</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>ImageManager.java</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">net</span><span class="o">.</span><span class="na">dolice</span><span class="o">.</span><span class="na">image</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.content.ContentResolver</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.content.ContentValues</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.content.Context</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.graphics.Bitmap</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.os.Environment</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.provider.MediaStore</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.util.Log</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.io.FileOutputStream</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.util.Locale</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> * Created by Dolice on 15/02/28.</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ImageManager</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span> <span class="n">Context</span> <span class="n">mContext</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">private</span> <span class="n">String</span> <span class="n">fileFullPath</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="nf">ImageManager</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">mContext</span> <span class="o">=</span> <span class="n">context</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * 画像の保存</span>
</span><span class='line'><span class="cm">     * @param bitmap</span>
</span><span class='line'><span class="cm">     * @param albumName</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">(</span><span class="n">Bitmap</span> <span class="n">bitmap</span><span class="o">,</span> <span class="n">String</span> <span class="n">albumName</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(!</span><span class="n">canUseSd</span><span class="o">())</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">&quot;Error&quot;</span><span class="o">,</span> <span class="s">&quot;Can&#39;t use SD Card&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">return</span><span class="o">;</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">saveToSd</span><span class="o">(</span><span class="n">getSdStorageDir</span><span class="o">(</span><span class="n">albumName</span><span class="o">),</span> <span class="n">bitmap</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * SDカードに画像保存</span>
</span><span class='line'><span class="cm">     * @param dir</span>
</span><span class='line'><span class="cm">     * @param bitmap</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">saveToSd</span><span class="o">(</span><span class="n">File</span> <span class="n">dir</span><span class="o">,</span> <span class="n">Bitmap</span> <span class="n">bitmap</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">fileName</span> <span class="o">=</span> <span class="n">getFileName</span><span class="o">();</span>
</span><span class='line'>        <span class="n">fileFullPath</span> <span class="o">=</span> <span class="n">dir</span><span class="o">.</span><span class="na">getAbsolutePath</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="n">fileName</span><span class="o">;</span>
</span><span class='line'>        <span class="k">try</span> <span class="o">{</span>
</span><span class='line'>            <span class="c1">// 保存処理</span>
</span><span class='line'>            <span class="n">FileOutputStream</span> <span class="n">fos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">fileFullPath</span><span class="o">);</span>
</span><span class='line'>            <span class="n">bitmap</span><span class="o">.</span><span class="na">compress</span><span class="o">(</span><span class="n">Bitmap</span><span class="o">.</span><span class="na">CompressFormat</span><span class="o">.</span><span class="na">JPEG</span><span class="o">,</span> <span class="mi">100</span><span class="o">,</span> <span class="n">fos</span><span class="o">);</span>
</span><span class='line'>            <span class="n">fos</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
</span><span class='line'>            <span class="n">fos</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span><span class='line'>        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">&quot;Error&quot;</span><span class="o">,</span> <span class="s">&quot;&quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
</span><span class='line'>        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
</span><span class='line'>            <span class="c1">// アルバムに反映</span>
</span><span class='line'>            <span class="n">addGallery</span><span class="o">(</span><span class="n">fileName</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * 保存した画像をギャラリーに追加</span>
</span><span class='line'><span class="cm">     * @param fileName</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">addGallery</span><span class="o">(</span><span class="n">String</span> <span class="n">fileName</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">try</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">ContentValues</span> <span class="n">values</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ContentValues</span><span class="o">();</span>
</span><span class='line'>            <span class="n">ContentResolver</span> <span class="n">contentResolver</span> <span class="o">=</span> <span class="n">mContext</span><span class="o">.</span><span class="na">getContentResolver</span><span class="o">();</span>
</span><span class='line'>            <span class="n">values</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">MediaStore</span><span class="o">.</span><span class="na">Images</span><span class="o">.</span><span class="na">Media</span><span class="o">.</span><span class="na">MIME_TYPE</span><span class="o">,</span> <span class="s">&quot;image/jpeg&quot;</span><span class="o">);</span>
</span><span class='line'>            <span class="n">values</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">MediaStore</span><span class="o">.</span><span class="na">Images</span><span class="o">.</span><span class="na">Media</span><span class="o">.</span><span class="na">TITLE</span><span class="o">,</span> <span class="n">fileName</span><span class="o">);</span>
</span><span class='line'>            <span class="n">values</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;_data&quot;</span><span class="o">,</span> <span class="n">fileFullPath</span><span class="o">);</span>
</span><span class='line'>            <span class="n">contentResolver</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">MediaStore</span><span class="o">.</span><span class="na">Images</span><span class="o">.</span><span class="na">Media</span><span class="o">.</span><span class="na">EXTERNAL_CONTENT_URI</span><span class="o">,</span> <span class="n">values</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">&quot;Error&quot;</span><span class="o">,</span> <span class="s">&quot;&quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * 画像のファイル名を日付から生成し取得</span>
</span><span class='line'><span class="cm">     * @return</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">private</span> <span class="n">String</span> <span class="nf">getFileName</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">Date</span> <span class="n">mDate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">();</span>
</span><span class='line'>        <span class="n">SimpleDateFormat</span> <span class="n">fileNameFormat</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;yyyyMMdd_HHmmss&quot;</span><span class="o">,</span> <span class="n">Locale</span><span class="o">.</span><span class="na">ENGLISH</span><span class="o">);</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">fileName</span> <span class="o">=</span> <span class="n">fileNameFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">mDate</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;.jpg&quot;</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">fileName</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * SDカードのストレージパス取得</span>
</span><span class='line'><span class="cm">     * @param albumName</span>
</span><span class='line'><span class="cm">     * @return</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">private</span> <span class="n">File</span> <span class="nf">getSdStorageDir</span><span class="o">(</span><span class="n">String</span> <span class="n">albumName</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">File</span> <span class="n">dir</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStoragePublicDirectory</span><span class="o">(</span>
</span><span class='line'>                <span class="n">Environment</span><span class="o">.</span><span class="na">DIRECTORY_PICTURES</span><span class="o">),</span> <span class="n">albumName</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="o">(!</span><span class="n">dir</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
</span><span class='line'>            <span class="k">if</span> <span class="o">(!</span><span class="n">dir</span><span class="o">.</span><span class="na">mkdirs</span><span class="o">())</span> <span class="o">{</span>
</span><span class='line'>                <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">&quot;Error&quot;</span><span class="o">,</span> <span class="s">&quot;Directory not created&quot;</span><span class="o">);</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">dir</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * SDカードが読み込み可能か</span>
</span><span class='line'><span class="cm">     * @return</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">canReadSd</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">status</span> <span class="o">=</span> <span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStorageState</span><span class="o">();</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(!</span><span class="n">status</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">Environment</span><span class="o">.</span><span class="na">MEDIA_MOUNTED</span><span class="o">))</span> <span class="o">{</span>
</span><span class='line'>            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStorageDirectory</span><span class="o">();</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">canRead</span><span class="o">()){</span>
</span><span class='line'>            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * SDカードに書き込み可能か</span>
</span><span class='line'><span class="cm">     * @return</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">canWriteSd</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">status</span> <span class="o">=</span> <span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStorageState</span><span class="o">();</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(!</span><span class="n">status</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">Environment</span><span class="o">.</span><span class="na">MEDIA_MOUNTED</span><span class="o">))</span> <span class="o">{</span>
</span><span class='line'>            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStorageDirectory</span><span class="o">();</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">canWrite</span><span class="o">()){</span>
</span><span class='line'>            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * SDカードが使用可能か</span>
</span><span class='line'><span class="cm">     * @return</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">canUseSd</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="nf">canReadSd</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="n">canWriteSd</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ネットワーク接続の有無を取得する]]></title>
    <link href="https://lab.dolice.net/blog/2015/05/04/android-network-manager/"/>
    <updated>2015-05-04T09:00:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2015/05/04/android-network-manager</id>
    <content type="html"><![CDATA[<p>Androidアプリでネットワーク接続の有無を判定するサンプルを作成しました。</p>

<p>下記よりサンプルをダウンロードできます。</p>

<h2>サンプルダウンロード</h2>

<ul>
<li><a href="https://github.com/masakihirokawa/android-network-manager">https://github.com/masakihirokawa/android-network-manager</a></li>
</ul>


<h2>導入手順</h2>

<h3>1. パーミッションの追加</h3>

<p><em>AndroidManifest.xml</em> にネットワーク接続の取得を許可するための権限を追加します。</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.ACCESS_NETWORK_STATE&quot;</span> <span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2. NetworkManager クラスの組み込み</h3>

<p>ネットワーク状態を判定するクラス <em>NetworkManager.java</em> を「<em>/app/src/main/java/net/dolice/connection/</em>」ディレクトリに配置します。</p>

<h3>3. オンライン状態のチェック</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="c1">// 引数に Context を渡し判定します</span>
</span><span class='line'><span class="k">if</span> <span class="o">(</span><span class="n">NetworkManager</span><span class="o">.</span><span class="na">isConnected</span><span class="o">(</span><span class="k">this</span><span class="o">))</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="s">&quot;オンラインです&quot;</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="s">&quot;オフラインです&quot;</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>下記に実装サンプルを記載します。</p>

<p>サンプルでは、ネットワーク状態をチェックした結果をテキストビューに表示しています。オフラインの時はアラートが表示されます。</p>

<h2>サンプルソースコード</h2>

<h3>MainActivity.java</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">net</span><span class="o">.</span><span class="na">dolice</span><span class="o">.</span><span class="na">networkmanagerex</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.app.Activity</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.app.AlertDialog</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.util.Log</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.widget.TextView</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">net.dolice.connection.NetworkManager</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@Override</span>
</span><span class='line'>    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
</span><span class='line'>        <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// ネットワーク状態をチェックし状態をテキストビューに表示</span>
</span><span class='line'>        <span class="n">TextView</span> <span class="n">networkStatus</span> <span class="o">=</span> <span class="o">(</span><span class="n">TextView</span><span class="o">)</span><span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">network_status</span><span class="o">);</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">isConnected</span><span class="o">())</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">networkStatus</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&quot;オンラインです&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">networkStatus</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&quot;オフラインです&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// ネットワーク状態のチェック</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kt">boolean</span> <span class="nf">isConnected</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(!</span><span class="n">NetworkManager</span><span class="o">.</span><span class="na">isConnected</span><span class="o">(</span><span class="k">this</span><span class="o">))</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">showAlert</span><span class="o">(</span><span class="s">&quot;お知らせ&quot;</span><span class="o">,</span> <span class="s">&quot;ネットワーク接続が確立されていません&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// アラートの表示</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">showAlert</span><span class="o">(</span><span class="n">String</span> <span class="n">title</span><span class="o">,</span> <span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">try</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">AlertDialog</span><span class="o">.</span><span class="na">Builder</span> <span class="n">alertDialogBuilder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AlertDialog</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">);</span>
</span><span class='line'>            <span class="n">alertDialogBuilder</span><span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="n">title</span><span class="o">);</span>
</span><span class='line'>            <span class="n">alertDialogBuilder</span><span class="o">.</span><span class="na">setMessage</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
</span><span class='line'>            <span class="n">alertDialogBuilder</span><span class="o">.</span><span class="na">setPositiveButton</span><span class="o">(</span><span class="s">&quot;OK&quot;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span><span class='line'>            <span class="n">alertDialogBuilder</span><span class="o">.</span><span class="na">setCancelable</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>            <span class="n">AlertDialog</span> <span class="n">alertDialog</span> <span class="o">=</span> <span class="n">alertDialogBuilder</span><span class="o">.</span><span class="na">create</span><span class="o">();</span>
</span><span class='line'>            <span class="n">alertDialog</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>
</span><span class='line'>        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Error</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">&quot;MainActivity&quot;</span><span class="o">,</span> <span class="s">&quot;showAlert: &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>NetworkManager.java</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">net</span><span class="o">.</span><span class="na">dolice</span><span class="o">.</span><span class="na">connection</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.content.Context</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.net.ConnectivityManager</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.net.NetworkInfo</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> * Created by Dolice on 15/03/16.</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NetworkManager</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * ネットワーク接続が確立されているか</span>
</span><span class='line'><span class="cm">     * @param context</span>
</span><span class='line'><span class="cm">     * @return</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isConnected</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">){</span>
</span><span class='line'>        <span class="n">ConnectivityManager</span> <span class="n">connectivityManager</span> <span class="o">=</span> <span class="o">(</span><span class="n">ConnectivityManager</span><span class="o">)</span><span class="n">context</span><span class="o">.</span><span class="na">getSystemService</span><span class="o">(</span><span class="n">Context</span><span class="o">.</span><span class="na">CONNECTIVITY_SERVICE</span><span class="o">);</span>
</span><span class='line'>        <span class="n">NetworkInfo</span> <span class="n">networkInfo</span> <span class="o">=</span> <span class="n">connectivityManager</span><span class="o">.</span><span class="na">getActiveNetworkInfo</span><span class="o">();</span>
</span><span class='line'>        <span class="k">if</span><span class="o">(</span><span class="n">networkInfo</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">){</span>
</span><span class='line'>            <span class="k">return</span> <span class="n">connectivityManager</span><span class="o">.</span><span class="na">getActiveNetworkInfo</span><span class="o">().</span><span class="na">isConnected</span><span class="o">();</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[指定した時間後に処理を遅延実行する]]></title>
    <link href="https://lab.dolice.net/blog/2015/05/04/android-handler-post-delayed/"/>
    <updated>2015-05-04T08:00:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2015/05/04/android-handler-post-delayed</id>
    <content type="html"><![CDATA[<p>Androidアプリで指定した時間後に処理を実行するコードです。</p>

<p>例えばフェードアウトアニメーション後にメモリを解放したい際などに使用します。</p>

<p>下記のコードでは、3秒後に処理を実行するよう指定しています（<em>3秒</em>の場合は <em>3000</em>のようにミリ秒単位で指定します）。</p>

<h2>サンプルソースコード</h2>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="c1">// 3秒後に処理を実行する</span>
</span><span class='line'><span class="k">new</span> <span class="nf">Handler</span><span class="o">().</span><span class="na">postDelayed</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="nd">@Override</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="c1">// TODO: ここで処理を実行する</span>
</span><span class='line'>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">},</span> <span class="mi">3000</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[綺麗な高画質壁紙 - Androidアプリ]]></title>
    <link href="https://lab.dolice.net/blog/2015/05/03/android-beautiful-wallpapers-ja/"/>
    <updated>2015-05-03T12:00:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2015/05/03/android-beautiful-wallpapers-ja</id>
    <content type="html"><![CDATA[<div class="app_screenshot_container"><img src="https://dolice.net/mb/android/marketing/images/beautiful_wallpapers/screenshot_pc/ja/screenshot1.jpg" class="app_screenshot" /></div>


<p>Androidアプリ「<a href="https://play.google.com/store/apps/details?id=net.dolice.beautifulwallpapers" title="綺麗な高画質壁紙">綺麗な高画質壁紙</a>」は、20,000枚以上の綺麗な壁紙をダウンロードできる無料アプリです。</p>

<p>高品質な画像を一枚ずつ厳選しておりますので、ギャラリーアプリとしてもお楽しみいただけます。</p>

<h2>特長</h2>

<p>このアプリの特長は、壁紙の品質を重視しながら手作業で更新している点です。</p>

<p>画像ギャラリーとしてお楽しみいただけるのはもちろん、使いたくなる壁紙がより多く見つかるよう努めています。</p>

<p>クールな壁紙だけでなく、女性向けのかわいい壁紙も多くセレクトしています。</p>

<h2>Google Play からダウンロード</h2>

<ul>
<li><strong><a href="https://play.google.com/store/apps/details?id=net.dolice.beautifulwallpapers" title="綺麗な高画質壁紙">綺麗な高画質壁紙</a></strong></li>
</ul>


<h2>シンプルかつ豊富な機能</h2>

<p>簡単操作でお気に入りの壁紙を保存したり、アプリから直接ホーム画面とロック画面のテーマに設定できます。</p>

<p>最新の壁紙や人気の壁紙も一覧でき、「シンプル」「カラフル」「モノクロ」「自然」「イラスト」等のカテゴリも 18種類ご用意しています。</p>

<div class="app_screenshot_container mt12"><img src="https://dolice.net/mb/android/marketing/images/beautiful_wallpapers/screenshot_pc/ja/screenshot2.jpg" class="app_screenshot" /></div>


<h2>見易いサムネイル機能</h2>

<p>壁紙のサムネイル一覧表示やフルスクリーン表示などのギャラリー機能も充実しています。</p>

<div class="app_screenshot_container mt12"><img src="https://dolice.net/mb/android/marketing/images/beautiful_wallpapers/screenshot_pc/ja/screenshot3.jpg" class="app_screenshot" /></div>


<h2>お気に入り機能</h2>

<p>壁紙をお気に入りに追加することで、いつでも好きな壁紙を一覧できます。</p>

<div class="app_screenshot_container mt12"><img src="https://dolice.net/mb/android/marketing/images/beautiful_wallpapers/screenshot_pc/ja/screenshot4.jpg" class="app_screenshot" /></div>


<h2>壁紙の共有機能</h2>

<p>Facebook／Twitter／LINE／Instagram／Pinterest／メール等での共有機能も搭載しています。</p>

<div class="app_screenshot_container mt12"><img src="https://dolice.net/mb/android/marketing/images/beautiful_wallpapers/screenshot_pc/ja/screenshot5.jpg" class="app_screenshot" /></div>


<h2>いつもの画面を彩りましょう</h2>

<p>Android用の壁紙や LINEのトーク背景をお探しの方は、是非このアプリをお試しください。</p>

<p>綺麗で高級感のある壁紙を厳選しておりますので、お気に入りがきっと見つかります。</p>

<p>このアプリでいつもの画面を彩りましょう！</p>

<h2>主な機能</h2>

<ol>
<li>簡単操作で壁紙を保存</li>
<li>アプリから直接テーマに設定</li>
<li>壁紙は随時追加・更新</li>
<li>最新や人気の壁紙の一覧機能</li>
<li>18種類以上のカテゴリ表示機能</li>
<li>壁紙のお気に入り機能</li>
<li>壁紙のサムネイル一覧表示機能</li>
<li>壁紙のフルスクリーン表示機能</li>
<li>Facebook／Twitter／LINE／Instagram／メール等での共有機能</li>
<li>壁紙の更新をプッシュ通知でお知らせ</li>
</ol>


<h2>壁紙のカテゴリ一覧</h2>

<ul>
<li>抽象的</li>
<li>シンプル</li>
<li>カラフル</li>
<li>モノクロ</li>
<li>自然</li>
<li>宇宙</li>
<li>花</li>
<li>建築</li>
<li>車</li>
<li>人物</li>
<li>動物</li>
<li>アート</li>
<li>イラスト</li>
<li>可愛い</li>
<li>食べ物・飲み物</li>
<li>タイポグラフィ</li>
<li>3D</li>
<li>ユーモア</li>
</ul>


<h2>壁紙のサイズ</h2>

<ul>
<li>1440 × 2560ピクセル（<em>WQHD</em>）</li>
<li>1080 × 1920ピクセル（<em>FHD</em>）</li>
<li>720 × 1280ピクセル（<em>HD</em>）</li>
<li>480 × 800ピクセル（<em>WVGA</em>）</li>
<li>2560 × 1600ピクセル (<em>WQXGA</em>)</li>
<li>1200 × 1920ピクセル (<em>WUXGA</em>)</li>
</ul>


<h2>価格</h2>

<ul>
<li>無料</li>
</ul>


<h2>対応言語</h2>

<ul>
<li>日本語</li>
<li>英語</li>
<li>ロシア語</li>
<li>フランス語</li>
<li>イタリア語</li>
<li>タイ語</li>
<li>繁体中国語</li>
</ul>


<h2>Google Play からダウンロード</h2>

<ul>
<li><strong><a href="https://play.google.com/store/apps/details?id=net.dolice.beautifulwallpapers" title="綺麗な高画質壁紙">綺麗な高画質壁紙</a></strong></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Beautiful HD Wallpapers - Android app]]></title>
    <link href="https://lab.dolice.net/blog/2015/05/03/android-beautiful-wallpapers-en/"/>
    <updated>2015-05-03T11:00:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2015/05/03/android-beautiful-wallpapers-en</id>
    <content type="html"><![CDATA[<div class="app_screenshot_container"><img src="https://dolice.net/mb/android/marketing/images/beautiful_wallpapers/screenshot_pc/en/screenshot1.jpg" class="app_screenshot" /></div>


<p>There&#8217;s no reason you need to settle for a standard-looking lock screen or home screen on your mobile device when instead you could customize it. The Beautiful HD Wallpapers app can be used on your Android to completely change up how your device looks. Use these on your lock and/or home screen and what&#8217;s really cool is that the app is updated daily with new exciting choices.</p>

<h2>Google Play</h2>

<ul>
<li><strong><a href="https://play.google.com/store/apps/details?id=net.dolice.beautifulwallpapers" title="Beautiful HD Wallpapers">Beautiful HD Wallpapers</a></strong></li>
</ul>


<h2>A Huge Selection of Free Options</h2>

<p>This app provides you with more than 20,000 free wallpapers that you can download and then save to your device. There are 18 categories of wallpapers to choose from, which also makes it easy to find what you&#8217;re looking for. During your browsing just add wallpapers to your favorites folder so they are there when you want to use them. As you view the wallpapers in the gallery you&#8217;ll find that they are displayed as full screen and they are shown as a slideshow. If you come across ones that you think are perfect for your family and friends why not share them through Twitter, Facebook, email, and Instagram.</p>

<p>There has been a pretty extensive update recently that basically gives users a whole lot more of everything. There are more wallpapers, they are now updated daily, the favorites list is all new, the wallpaper categories are all new, the ability to share on Instagram is new, minor bugs have been fixed, and so much more. The app scores quite high with users getting four out of five stars from them.</p>

<h2>The User Experience</h2>

<p>Despite the fact that you have such a wide selection available to you the app itself remains incredibly easy to use. You can view the wallpapers in full screen as mentioned or as a thumbnail if you&#8217;d rather. You can enable the push notification to get information whenever updates are made, and there is a list function so that you can check out the most popular and the latest wallpapers.</p>

<p>I find the app incredibly easy and enjoyable to browse through. I really like all the beautiful wallpapers you can discover and the category groupings make navigation much easier. The only downfall for me is the ad banner that appears across the bottom of the screen as it can be a bit distracting.</p>

<div class="app_screenshot_container mt12"><img src="https://dolice.net/mb/android/marketing/images/beautiful_wallpapers/screenshot_pc/en/screenshot2.jpg" class="app_screenshot" /></div>


<h2>Pros and Cons</h2>

<h3>Pros</h3>

<ul>
<li>There are more than 20,000 wallpapers and more are constantly being added</li>
<li>Mark wallpapers as favorites</li>
<li>Share wallpaper with friends and family by email, Instagram, Twitter, and Facebook</li>
<li>Wallpapers are grouped into 18 categories to help you find what you want</li>
<li>There is a most popular and latest list available</li>
</ul>


<h3>Cons</h3>

<ul>
<li>The ad banner across the bottom of the screen can be distracting</li>
</ul>


<div class="app_screenshot_container mt12"><img src="https://dolice.net/mb/android/marketing/images/beautiful_wallpapers/screenshot_pc/en/screenshot5.jpg" class="app_screenshot" /></div>


<h2>Final Words</h2>

<p>The Beautiful HD Wallpapers app is a beautiful offering that gives you a huge free selection of wallpapers to use for your lock and home screen.</p>

<p><em>Article source: <a href="http://www.apppicker.com/" title="AppPicker.com">AppPicker.com</a></em></p>

<h2>Main functions</h2>

<ol>
<li>Browse pages and save wallpapers</li>
<li>Wallpapers are added and updated daily</li>
<li>List functions for the latest and popular wallpapers</li>
<li>Display over 18 wallpaper categories</li>
<li>Wallpaper favorites function</li>
<li>View a list of wallpaper thumbnails</li>
<li>Display wallpapers full screen</li>
<li>Share wallpapers via Facebook / Twitter / Instagram / email</li>
<li>Learn about wallpaper updates through push notifications</li>
</ol>


<h2>Wallpaper categories</h2>

<ul>
<li>Abstract</li>
<li>Simple</li>
<li>Colorful</li>
<li>Monochrome</li>
<li>Nature</li>
<li>Space</li>
<li>Flowers</li>
<li>Architecture</li>
<li>Car</li>
<li>People</li>
<li>Animals</li>
<li>Art</li>
<li>Illustrations</li>
<li>Cute</li>
<li>Food &amp; Drink</li>
<li>Typography</li>
<li>3D</li>
<li>Funny</li>
</ul>


<h2>Wallpaper sizes</h2>

<ul>
<li>1440 × 2560 pixel (<em>WQHD</em>)</li>
<li>1080 × 1920 pixel (<em>FHD</em>)</li>
<li>720 × 1280 pixel (<em>HD</em>)</li>
<li>480 × 800 pixel (<em>WVGA</em>)</li>
<li>2560 × 1600 pixel (<em>WQXGA</em>)</li>
<li>1200 × 1920 pixel (<em>WUXGA</em>)</li>
</ul>


<h2>Price</h2>

<ul>
<li>Free</li>
</ul>


<h2>Official Facebook Page</h2>

<ul>
<li><strong><a href="https://www.facebook.com/net.dolice.beautifulwallpapers" title="Facebook - Beautiful HD Wallpapers">Facebook - Beautiful HD Wallpapers</a></strong></li>
</ul>


<h2>YouTube</h2>

<ul>
<li><strong><a href="https://www.youtube.com/watch?v=LA0XuXMq3as" title="YouTube - Beautiful HD Wallpapers">YouTube - Beautiful HD Wallpapers</a></strong></li>
</ul>


<h2>Google Play</h2>

<ul>
<li><strong><a href="https://play.google.com/store/apps/details?id=net.dolice.beautifulwallpapers" title="Beautiful HD Wallpapers">Beautiful HD Wallpapers</a></strong></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[浮世絵壁紙 - 美しい日本画ギャラリー - iPhone/iPodアプリ]]></title>
    <link href="https://lab.dolice.net/blog/2014/10/24/ios-ukiyo-e-ja/"/>
    <updated>2014-10-24T18:28:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2014/10/24/ios-ukiyo-e-ja</id>
    <content type="html"><![CDATA[<div class="app_screenshot_container"><img src="https://dolice.net/mb/ios/marketing/images/ukiyo-e/screenshot_pc/ja/screenshot1.jpg" class="app_screenshot" /></div>


<p>iPhoneアプリ「<a href="https://itunes.apple.com/us/app/ukiyoe/id835559799" title="浮世絵壁紙 - 美しい日本画ギャラリー">浮世絵壁紙 - 美しい日本画ギャラリー</a>」は、世界中で愛される葛飾北斎、歌川広重、東洲斎写楽などの作品を一枚一枚丁寧に、独自手法で鮮やかに加工して収録した無料アプリです。iPhone 6/6 Plus/SEに対応。iOS 9の視差効果もサポートしています。</p>

<p>古紙独特の皺や染みなども丹念に修復していますので、浮世絵の持つ目の覚めるような紅や藍の色合いを楽しめます。フランスの印象派やゴッホにも多大な影響を与えた名作の数々を、あなたの iPhoneに彩らせ和風にアレンジしましょう。</p>

<p>美人画や水墨画、風景画の他、和風柄物の中でも趣のある作品を収録していますので、お気に入りがきっと見つかります。普段と少し気分を変えたいという方は、このアプリで iPhoneを和風にアレンジしてみてはいかがでしょうか。</p>

<p>下記よりアプリをダウンロードできますので、是非ご利用ください。</p>

<p><a href="https://itunes.apple.com/jp/app/fu-shi-hui-bi-zhihd-300mei/id835559799?mt=8&uo=4" target="itunes_store" style="display:inline-block;overflow:hidden;background:url(https://linkmaker.itunes.apple.com/htmlResources/assets/ja_jp//images/web/linkmaker/badge_appstore-lrg.png) no-repeat;width:135px;height:40px;@media only screen{background-image:url(https://linkmaker.itunes.apple.com/htmlResources/assets/ja_jp//images/web/linkmaker/badge_appstore-lrg.svg);}"></a></p>

<h2>浮世絵のカテゴリ</h2>

<h3>年代別</h3>

<ul>
<li>1780年〜1804年</li>
<li>1804年〜1868年</li>
<li>1868年〜1912年</li>
<li>1915年〜1940年代</li>
</ul>


<h3>作者別</h3>

<ul>
<li>東洲斎写楽</li>
<li>喜多川歌麿</li>
<li>歌川広重</li>
<li>歌川国貞</li>
<li>歌川国芳</li>
<li>葛飾北斎</li>
<li>藤島武二</li>
<li>橋口五葉</li>
<li>浅野武二</li>
</ul>


<h3>その他</h3>

<ul>
<li>和柄</li>
<li>シンプル</li>
</ul>


<h2>主な機能</h2>

<ol>
<li>簡単操作で壁紙を保存</li>
<li>最新や人気の壁紙の一覧機能</li>
<li>作者・年代別のカテゴリ表示機能</li>
<li>壁紙のお気に入り機能</li>
<li>壁紙のサムネイル一覧表示機能</li>
<li>壁紙のフルスクリーン表示機能</li>
<li>壁紙のスライドショー機能</li>
<li>LINE / Facebook / Twitter / Instagram / メールでの壁紙共有機能</li>
<li>壁紙の更新をプッシュ通知でお知らせ</li>
</ol>


<h2>壁紙のサイズ</h2>

<ul>
<li>iPhone 6: 890 × 1590ピクセル</li>
<li>iPhone 6 Plus: 1438 × 2592ピクセル</li>
<li>iPhone 5/SE: 744 × 1392ピクセル</li>
</ul>


<h2>価格</h2>

<ul>
<li>無料</li>
</ul>


<h2>対応言語</h2>

<ul>
<li>日本語</li>
<li>英語</li>
<li>ロシア語</li>
<li>フランス語</li>
</ul>


<h2>著作権表記</h2>

<p>浮世絵は著作権フリー（著作権切れ）の作品のみを選別し、iPhone用の壁紙、または作品集として1枚ずつ丹念に加工・修復しています。</p>

<h2>公式Facebookページ</h2>

<ul>
<li><a href="https://www.facebook.com/dolice.ukiyoe.ja">https://www.facebook.com/dolice.ukiyoe.ja</a></li>
</ul>


<h2>ユーザーの皆様の声</h2>

<p>日本画、浮世絵、歴史が好きでこんな壁紙を探していたので凄く嬉しいです！今まで和風壁紙はありましたがデシタルの壁紙ばかりしか見当たらなかったのですが、リアル浮世絵が壁紙で使えるのがナイス！大正ロマンなのもあるし、そういうの好きな人にはお勧めします！</p>

<hr />

<p>美しい！和のテイストが素晴しい。どれを表に出しても自慢出来ます。むしろ全てを表に出したい。毎日異なる壁紙として楽しんでいます。</p>

<hr />

<p>浮世絵とひとくちに言ってもこんなにいろんな種類やジャンルがあったんだと驚きました
どれも素敵でクオリティも高い！
このアプリをきっかけに浮世絵の興味がかなり湧きました</p>

<hr />

<p>無料でこれだけ集まってる浮世絵集は他にはない！千代紙のようなテイストの画像もたくさんあって、壁紙を週替わりで変えていーんじゃないかっていうくらい贅沢なラインナップ。どれを保存しよ〜と嬉しい悩みが堪能できました。眺めてるだけで癒されます。</p>

<hr />

<p>クリアーで綺麗な発色で好きです！！
浮世絵だけじゃなく、他の和風の壁紙も入っていて、和の壁紙を探している人にはバランスが良いと思います。桜の絵が気に入りました。</p>

<hr />

<p>たくさんの浮世絵がどれも綺麗で楽しいです！操作も簡単だしスムーズで分かりやすいです。
欲をいえば、それぞれの浮世絵の名前・作者など、作品情報があるとありがたいです。気に入って毎日使っている浮世絵の名前とかは気になるので。</p>

<hr />

<p>タブレットが生まれ変わった。日本画を身近に感じてとても良いです。</p>

<hr />

<p>人だけでなく花、景色などどれも綺麗。無料とは信じ難い程。</p>

<hr />

<p>日本的な美しさがよく出ていると思いました。</p>

<p><a href="https://itunes.apple.com/jp/app/fu-shi-hui-bi-zhihd-300mei/id835559799?mt=8&uo=4" target="itunes_store" style="display:inline-block;overflow:hidden;background:url(https://linkmaker.itunes.apple.com/htmlResources/assets/ja_jp//images/web/linkmaker/badge_appstore-lrg.png) no-repeat;width:135px;height:40px;@media only screen{background-image:url(https://linkmaker.itunes.apple.com/htmlResources/assets/ja_jp//images/web/linkmaker/badge_appstore-lrg.svg);}"></a></p>

<h2>関連記事</h2>

<ul>
<li><strong><a href="https://lab.dolice.net/blog/2014/03/11/ios-beautiful-wallpaper-ja/" title="綺麗な壁紙HD 20,000枚以上無料 - iPhone/iPodアプリ">綺麗な壁紙HD 20,000枚以上無料 - iPhone/iPodアプリ</a></strong></li>
<li><strong><a href="https://lab.dolice.net/blog/2014/03/11/ios-cool-wallpaper-ja/" title="クールな壁紙HD 20,000枚以上無料 - iPhone/iPodアプリ">クールな壁紙HD 20,000枚以上無料 - iPhone/iPodアプリ</a></strong></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iAdインタースティシャル広告を表示するサンプル]]></title>
    <link href="https://lab.dolice.net/blog/2014/10/24/objc-iad-interstitial/"/>
    <updated>2014-10-24T12:00:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2014/10/24/objc-iad-interstitial</id>
    <content type="html"><![CDATA[<p>iPhoneアプリに iAdインタースティシャル広告を表示するサンプルを下記に作成しました。</p>

<p>実装に必要な部分のみを抜粋したソースコードも併せて記載しますので、少しでも参考になれば幸いです。</p>

<h2>サンプルダウンロード</h2>

<ul>
<li><a href="https://github.com/masakihirokawa/objc-iad-interstitial">https://github.com/masakihirokawa/objc-iad-interstitial</a></li>
</ul>


<h2>サンプルソースコード</h2>

<h3>ViewController.h</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cp">#import &lt;iAd/iAd.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@interface</span> <span class="nc">ViewController</span> : <span class="nc">UIViewController</span> <span class="o">&lt;</span><span class="n">ADInterstitialAdDelegate</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">ADInterstitialAd</span> <span class="o">*</span><span class="n">iAdInterstitial</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>ViewController.m</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="c1">// iAdインタースティシャル広告読み込み</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">loadiAdInterstitial</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">iAdInterstitial</span> <span class="o">=</span> <span class="p">[[</span><span class="n">ADInterstitialAd</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</span><span class='line'>    <span class="n">iAdInterstitial</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="n">self</span><span class="p">;</span>
</span><span class='line'>    <span class="n">self</span><span class="p">.</span><span class="n">interstitialPresentationPolicy</span> <span class="o">=</span> <span class="n">ADInterstitialPresentationPolicyManual</span><span class="p">;</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span> <span class="n">requestInterstitialAdPresentation</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// iAdインタースティシャル広告がロードされた時に呼ばれる</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">interstitialAdDidLoad:</span><span class="p">(</span><span class="n">ADInterstitialAd</span> <span class="o">*</span><span class="p">)</span><span class="nv">interstitialAd</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">iAdInterstitial</span><span class="p">.</span><span class="n">loaded</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="p">[</span><span class="n">iAdInterstitial</span> <span class="nl">presentFromViewController:</span><span class="n">self</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// iAdインタースティシャル広告がアンロードされた時に呼ばれる</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">interstitialAdDidUnload:</span><span class="p">(</span><span class="n">ADInterstitialAd</span> <span class="o">*</span><span class="p">)</span><span class="nv">interstitialAd</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">iAdInterstitial</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// iAdインタースティシャル広告の読み込み失敗時に呼ばれる</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">interstitialAd:</span><span class="p">(</span><span class="n">ADInterstitialAd</span> <span class="o">*</span><span class="p">)</span><span class="nv">interstitialAd</span> <span class="nf">didFailWithError:</span><span class="p">(</span><span class="n">NSError</span> <span class="o">*</span><span class="p">)</span><span class="nv">error</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">iAdInterstitial</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// iAdインタースティシャル広告が閉じられた時に呼ばれる</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">interstitialAdActionDidFinish:</span><span class="p">(</span><span class="n">ADInterstitialAd</span> <span class="o">*</span><span class="p">)</span><span class="nv">interstitialAd</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">iAdInterstitial</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>関連記事</h2>

<ul>
<li><strong><a href="https://lab.dolice.net/blog/2014/10/18/iad-countries/" title="iAdの対応国が25ヶ国に増加">iAdの対応国が25ヶ国に増加</a></strong></li>
<li><strong><a href="https://lab.dolice.net/blog/2014/09/28/iphone6-admob/" title="AdMobバナー広告の iPhone 6/6 Plus対応">AdMobバナー広告の iPhone 6/6 Plus対応</a></strong></li>
<li><strong><a href="https://lab.dolice.net/blog/2014/07/30/admob-optimization/" title="AdMobの広告収益をアップする5つのポイント">AdMobの広告収益をアップする5つのポイント</a></strong></li>
</ul>


<h2>お薦めの参考書</h2>

<p><strong><a href="https://www.amazon.co.jp/gp/product/4839957037/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4839957037&linkCode=as2&tag=pinocchio-22">Swiftではじめる iPhoneアプリ開発の教科書 Swift 2 &amp; Xcode 7対応</a></strong><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=pinocchio-22&l=as2&o=9&a=4839957037" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br />
この参考書の通りに実践サンプルを作成することで、確実に力を養うことができます。サンプルコードもサイトからダウンロード出来るようになっており、特に広告の貼り方などが参考になりました。Swiftで何が出来るかを知ることができ、入門用にお薦めの1冊です。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iAdの対応国が25ヶ国に増加]]></title>
    <link href="https://lab.dolice.net/blog/2014/10/18/iad-countries/"/>
    <updated>2014-10-18T15:43:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2014/10/18/iad-countries</id>
    <content type="html"><![CDATA[<p>iAd配信国の追加が行われ、25ヶ国で広告が表示されるようになりました。現在の対応国は下記の通りです。</p>

<h3>iAdの対応国（2014年10月現在）</h3>

<ul>
<li>米国</li>
<li>カナダ</li>
<li>メキシコ</li>
<li>イギリス</li>
<li>フランス</li>
<li>ドイツ</li>
<li>イタリア</li>
<li>スペイン</li>
<li>アイルランド</li>
<li>ロシア</li>
<li>スイス</li>
<li>日本</li>
<li>台湾</li>
<li>香港</li>
<li>オーストラリア</li>
<li>ニュージーランド</li>
<li>オーストリア</li>
<li>ベルギー</li>
<li>デンマーク</li>
<li>フィンランド</li>
<li>ルクセンブルク</li>
<li>オランダ</li>
<li>ノルウェー</li>
<li>ポーランド</li>
<li>スウェーデン</li>
</ul>


<p>新たにインタースティシャル広告やプリロール動画広告、MREC バナー広告もアナウンスされ、今後の動きが楽しみですね。</p>

<h2>お薦めの参考書</h2>

<p><strong><a href="https://www.amazon.co.jp/gp/product/4839957037/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4839957037&linkCode=as2&tag=pinocchio-22">Swiftではじめる iPhoneアプリ開発の教科書 Swift 2 &amp; Xcode 7対応</a></strong><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=pinocchio-22&l=as2&o=9&a=4839957037" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br />
この参考書の通りに実践サンプルを作成することで、確実に力を養うことができます。サンプルコードもサイトからダウンロード出来るようになっており、特に広告の貼り方などが参考になりました。Swiftで何が出来るかを知ることができ、入門用にお薦めの1冊です。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iPhone 6/6 Plusのホーム画面とロック画面のプレビュー素材]]></title>
    <link href="https://lab.dolice.net/blog/2014/09/28/iphone6-home-lock-screen-preview-image/"/>
    <updated>2014-09-28T17:00:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2014/09/28/iphone6-home-lock-screen-preview-image</id>
    <content type="html"><![CDATA[<p><img src="https://lab.dolice.net/images/article/iphone6-home-lock-screen-preview-image/iphone6_plus.jpg" title="iPhone 6 Plus (5.5-inch)" alt="iPhone 6 Plus (5.5-inch)" /></p>

<p><img src="https://lab.dolice.net/images/article/iphone6-home-lock-screen-preview-image/iphone6.jpg" title="iPhone 6 (4.7-inch)" alt="iPhone 6 (4.7-inch)" /></p>

<p>iPhone 6/6 Plusのホーム画面とロック画面のプレビュー素材を作成しました。</p>

<p>下記より素材をダウンロードできます。背景透過・ラスタライズ済みの PNGファイルが入っています。</p>

<h2>ダウンロード</h2>

<ul>
<li><a href="https://github.com/masakihirokawa/iphone6-home-lock-screen-preview-image">https://github.com/masakihirokawa/iphone6-home-lock-screen-preview-image</a></li>
</ul>


<p>iPhone 6/6 Plusの実機でスクリーンショットを撮り、過去に iPhone 5/4用に作成したベクター素材をリサイズしながら重ねるという大雑把な工程でしたので、ピクセル単位では正確でない箇所もあるかもしれませんが、グリッド単位では問題ありませんので、必要に応じてご使用いただければ幸いです。</p>

<h2>お薦めの参考書</h2>

<p><strong><a href="https://www.amazon.co.jp/gp/product/4839957037/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4839957037&linkCode=as2&tag=pinocchio-22">Swiftではじめる iPhoneアプリ開発の教科書 Swift 2 &amp; Xcode 7対応</a></strong><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=pinocchio-22&l=as2&o=9&a=4839957037" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br />
この参考書の通りに実践サンプルを作成することで、確実に力を養うことができます。サンプルコードもサイトからダウンロード出来るようになっており、特に広告の貼り方などが参考になりました。Swiftで何が出来るかを知ることができ、入門用にお薦めの1冊です。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[AdMobバナー広告の iPhone 6/6 Plus対応]]></title>
    <link href="https://lab.dolice.net/blog/2014/09/28/iphone6-admob/"/>
    <updated>2014-09-28T16:00:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2014/09/28/iphone6-admob</id>
    <content type="html"><![CDATA[<p>AdMobバナー広告を iPhone 6/6 Plus（4.7-inch/5.5-inch）で表示する際は、下記のようにバナーを初期化することで綺麗に表示されます。</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">GADBannerView</span> <span class="o">*</span><span class="n">gadView</span> <span class="o">=</span> <span class="p">[[</span><span class="n">GADBannerView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithAdSize:</span>
</span><span class='line'>                          <span class="n">GADAdSizeFullWidthPortraitWithHeight</span><span class="p">(</span><span class="n">GAD_SIZE_320x50</span><span class="p">.</span><span class="n">height</span><span class="p">)];</span>
</span></code></pre></td></tr></table></div></figure>


<p>バナーの横幅をフルサイズにして縦幅を自動調整する指定を行っています。</p>

<p>テキスト広告については既に対応がされているようで、レスポンシブなデザインになっていました。</p>

<h2>バナー表示クラスのダウンロード</h2>

<p>下記に AdMobバナーを表示する「<a href="https://github.com/masakihirokawa/objc-classes-dc-admob-banner" title="DCAdMobBanner">DCAdMobBanner</a>」クラスを作成しました。</p>

<ul>
<li><a href="https://github.com/masakihirokawa/objc-classes-dc-admob-banner">https://github.com/masakihirokawa/objc-classes-dc-admob-banner</a></li>
</ul>


<p>実装ファイルの 53行目でアプリの広告ユニットIDを指定していますので、こちらを変更の上ご使用ください。</p>

<h2>関連記事</h2>

<ul>
<li><strong><a href="https://lab.dolice.net/blog/2014/07/30/admob-optimization/" title="AdMobの広告収益をアップする5つのポイント">AdMobの広告収益をアップする5つのポイント</a></strong></li>
<li><strong><a href="https://lab.dolice.net/blog/2014/03/12/admob-mediation/" title="AdMobのメディエーションを最適化する方法">AdMobのメディエーションを最適化する方法</a></strong></li>
<li><strong><a href="https://lab.dolice.net/blog/2014/02/25/objc-admob-inters/" title="iPhoneアプリに AdMobのインタースティシャル広告を導入する方法">iPhoneアプリに AdMobのインタースティシャル広告を導入する方法</a></strong></li>
</ul>


<h2>お薦めの参考書</h2>

<p><strong><a href="https://www.amazon.co.jp/gp/product/4797386258/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4797386258&linkCode=as2&tag=pinocchio-22">詳解 Swift 改訂版</a></strong><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=pinocchio-22&l=as2&o=9&a=4797386258" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br />
Swiftのかなり入り込んだところまで解説しながら、実践コードを多数収録しています。応用本になりますので、入門書を読み終えて中級者から上級者に差し掛かる時に読むことをお勧めします。読み物としてだけではなくリファレンスとしても使用できます。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS 8端末であるかの判定方法]]></title>
    <link href="https://lab.dolice.net/blog/2014/09/28/ios8-decision/"/>
    <updated>2014-09-28T15:00:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2014/09/28/ios8-decision</id>
    <content type="html"><![CDATA[<p>Objective-Cで iOS 8以降の端末であるか判定するコードを以下に記載します。</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="c1">// iOS 8以降であるか</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isIOS8</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">NSString</span> <span class="o">*</span><span class="n">osversion</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIDevice</span> <span class="n">currentDevice</span><span class="p">].</span><span class="n">systemVersion</span><span class="p">;</span>
</span><span class='line'>    <span class="n">NSArray</span>  <span class="o">*</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">osversion</span> <span class="nl">componentsSeparatedByString:</span><span class="s">@&quot;.&quot;</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="p">([(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)[</span><span class="n">a</span> <span class="nl">objectAtIndex:</span><span class="mi">0</span><span class="p">]</span> <span class="n">intValue</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">8</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>マクロで判定する場合は以下のように記載します。</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cp">#if __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= 80000</span>
</span><span class='line'>    <span class="c1">// iOSのバージョンが 8.0以降の場合の処理</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#else</span>
</span><span class='line'>    <span class="c1">// それ以外の場合の処理</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#endif</span>
</span></code></pre></td></tr></table></div></figure>


<h2>お薦めの参考書</h2>

<p><strong><a href="https://www.amazon.co.jp/gp/product/4797386258/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4797386258&linkCode=as2&tag=pinocchio-22">詳解 Swift 改訂版</a></strong><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=pinocchio-22&l=as2&o=9&a=4797386258" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br />
Swiftのかなり入り込んだところまで解説しながら、実践コードを多数収録しています。応用本になりますので、入門書を読み終えて中級者から上級者に差し掛かる時に読むことをお勧めします。読み物としてだけではなくリファレンスとしても使用できます。</p>
]]></content>
  </entry>
  
</feed>
