<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[Category: AdMob | Dolice Lab]]></title>
  <link href="https://lab.dolice.net/blog/categories/admob/atom.xml" rel="self"/>
  <link href="https://lab.dolice.net/"/>
  <updated>2016-09-05T12:25:03+09:00</updated>
  <id>https://lab.dolice.net/</id>
  <author>
    <name><![CDATA[Masaki Hirokawa]]></name>
    <email><![CDATA[info@dolice.net]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[iOSアプリに AdMobネイティブ広告を表示するクラスを作成しました]]></title>
    <link href="https://lab.dolice.net/blog/2016/09/04/objc-classes-dc-admob-native-ads/"/>
    <updated>2016-09-04T11:58:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2016/09/04/objc-classes-dc-admob-native-ads</id>
    <content type="html"><![CDATA[<p>iOSアプリに AdMobネイティブ広告を表示する「<a href="https://github.com/masakihirokawa/objc-classes-dc-admob-native-ads" title="DCAdMobNativeAds">DCAdMobNativeAds</a>」クラスを作成しました。</p>

<p>下記よりダウンロード出来ますので、実装の際のお役に立てば幸いです。</p>

<h2>ダウンロード</h2>

<ul>
<li><a href="https://github.com/masakihirokawa/objc-classes-dc-admob-native-ads">https://github.com/masakihirokawa/objc-classes-dc-admob-native-ads</a></li>
</ul>


<h2>使用方法</h2>

<h3>A. ネイティブ広告を指定したビューに配置</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">CGFloat</span> <span class="k">const</span> <span class="n">nativeAdsWidth</span>  <span class="o">=</span> <span class="p">[[</span><span class="n">UIScreen</span> <span class="n">mainScreen</span><span class="p">]</span> <span class="n">bounds</span><span class="p">].</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">;</span>
</span><span class='line'><span class="n">CGFloat</span> <span class="k">const</span> <span class="n">nativeAdsHeight</span> <span class="o">=</span> <span class="mf">80.0</span><span class="p">;</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">UIView</span> <span class="o">*</span><span class="n">nativeAdsView</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithFrame:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">nativeAdsWidth</span><span class="p">,</span> <span class="n">nativeAdsHeight</span><span class="p">)];</span>
</span><span class='line'><span class="p">[[</span><span class="n">DCAdMobNativeAds</span> <span class="n">sharedManager</span><span class="p">]</span> <span class="nl">showNativeAd:</span><span class="n">self</span> <span class="nl">targetView:</span><span class="n">nativeAdsView</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span>                                     <span class="nl">frame:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">nativeAdsWidth</span><span class="p">,</span> <span class="n">nativeAdsHeight</span><span class="p">)];</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="nl">addSubView:</span><span class="n">nativeAdsView</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>B. ネイティブ広告を取得し配置</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">CGFloat</span> <span class="k">const</span> <span class="n">nativeAdsWidth</span>  <span class="o">=</span> <span class="p">[[</span><span class="n">UIScreen</span> <span class="n">mainScreen</span><span class="p">]</span> <span class="n">bounds</span><span class="p">].</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">;</span>
</span><span class='line'><span class="n">CGFloat</span> <span class="k">const</span> <span class="n">nativeAdsHeight</span> <span class="o">=</span> <span class="mf">80.0</span><span class="p">;</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">UIView</span> <span class="o">*</span><span class="n">nativeAdsView</span> <span class="o">=</span> <span class="p">[[</span><span class="n">DCAdMobNativeAds</span> <span class="n">sharedManager</span><span class="p">]</span> <span class="nl">nativeAd:</span><span class="n">self</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span>                                                         <span class="nl">frame:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">nativeAdsWidth</span><span class="p">,</span> <span class="n">nativeAdsHeight</span><span class="p">)];</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="nl">addSubView:</span><span class="n">nativeAdsView</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>ネイティブ広告の寸法について</h2>

<p>AdMobネイティブ広告の縦幅は、80dp 以上である必要があります。それ未満のサイズを指定するとエラー取得時のデリゲートメソッドが呼ばれ、広告は表示されません。</p>

<p>横幅の最小値については未検証ですが、ネイティブ広告のユニット作成時にプレビューサイズを指定する際、280dp 以上である必要がありますので、恐らく 280dp が最小値だと思います。</p>

<p>iPhoneは 4-inch/ 4.7-inch/ 5.5-inch で横幅が異なりますので、今回のサンプルでは横幅一杯に指定する方法を取っています。</p>

<p>ネイティブ広告初期化の際、下記のように縦幅 80dp 以上のサイズを指定することで正常に表示されました。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">CGSize</span> <span class="k">const</span> <span class="n">nativeAdsSize</span> <span class="o">=</span> <span class="n">CGSizeMake</span><span class="p">([[</span><span class="n">UIScreen</span> <span class="n">mainScreen</span><span class="p">]</span> <span class="n">bounds</span><span class="p">].</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="mf">80.0</span><span class="p">);</span>
</span><span class='line'><span class="n">self</span><span class="p">.</span><span class="n">nativeExpressAdView</span> <span class="o">=</span> <span class="p">[[</span><span class="n">GADNativeExpressAdView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithAdSize:</span><span class="n">GADAdSizeFromCGSize</span><span class="p">(</span><span class="n">nativeAdsSize</span><span class="p">)</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span>                                                                   <span class="nl">origin:</span><span class="n">CGPointMake</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)];</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>ソースコード</h2>

<h3>DCAdMobNativeAds.h</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">import</span> <span class="o">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="n">UIKit</span><span class="o">/</span><span class="n">UIKit</span><span class="p">.</span><span class="n">h</span><span class="o">&gt;&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="err">@</span><span class="n">import</span> <span class="n">GoogleMobileAds</span><span class="p">;</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">@interface</span> <span class="nc">DCAdMobNativeAds</span> : <span class="nc">NSObject</span> <span class="o">&lt;</span><span class="n">GADNativeExpressAdViewDelegate</span><span class="o">&gt;</span> <span class="p">{</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="n">GADNativeExpressAdView</span> <span class="o">*</span><span class="n">nativeExpressAdView</span><span class="p">;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="p">}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">pragma</span> <span class="n">mark</span> <span class="o">-</span> <span class="n">property</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">strong</span><span class="p">)</span> <span class="n">GADNativeExpressAdView</span> <span class="o">*</span><span class="n">nativeExpressAdView</span><span class="p">;</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">pragma</span> <span class="n">mark</span> <span class="o">-</span> <span class="n">public</span> <span class="n">method</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">ul</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">sharedManager</span><span class="p">;</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">showNativeAd:</span><span class="p">(</span><span class="n">UIViewController</span> <span class="o">&lt;</span><span class="n">em</span><span class="o">&gt;</span><span class="p">)</span><span class="n">viewController</span> <span class="nl">targetView:</span><span class="p">(</span><span class="n">UIView</span> <span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;</span><span class="p">)</span><span class="n">targetView</span> <span class="nl">frame:</span><span class="p">(</span><span class="n">CGRect</span><span class="p">)</span><span class="n">frame</span><span class="p">;</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="p">(</span><span class="n">UIView</span> <span class="o">&lt;</span><span class="n">em</span><span class="o">&gt;</span><span class="p">)</span><span class="nl">nativeAd:</span><span class="p">(</span><span class="n">UIViewController</span> <span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;</span><span class="p">)</span><span class="n">viewController</span> <span class="nl">frame:</span><span class="p">(</span><span class="n">CGRect</span><span class="p">)</span><span class="n">frame</span><span class="p">;</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>DCAdMobNativeAds.m</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">import</span> <span class="s">&quot;DCAdMobNativeAds.h&quot;</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">@implementation</span> <span class="nc">DCAdMobNativeAds</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">@synthesize</span> <span class="n">nativeExpressAdView</span> <span class="o">=</span> <span class="n">nativeExpressAdView</span><span class="p">;</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">CGFloat</span> <span class="k">const</span> <span class="n">GAD_NATIVE_UNIT_ID</span> <span class="o">=</span> <span class="s">@&quot;Your Unit ID here&quot;</span><span class="p">;</span>
</span><span class='line'><span class="kt">BOOL</span>    <span class="k">const</span> <span class="n">GAD_TEST_MODE</span>      <span class="o">=</span> <span class="n">YES</span><span class="p">;</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">pragma</span> <span class="n">mark</span> <span class="o">-</span> <span class="n">Shared</span> <span class="n">Manager</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">static</span> <span class="kt">id</span> <span class="n">sharedInstance</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">ul</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">sharedManager</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="k">@synchronized</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">sharedInstance</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">sharedInstance</span> <span class="o">=</span> <span class="p">[[</span><span class="n">self</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="p">}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="k">return</span> <span class="n">sharedInstance</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">pragma</span> <span class="n">mark</span> <span class="o">-</span> <span class="n">public</span> <span class="n">method</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">ul</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">showNativeAd:</span><span class="p">(</span><span class="n">UIViewController</span> <span class="o">&lt;</span><span class="n">em</span><span class="o">&gt;</span><span class="p">)</span><span class="n">viewController</span> <span class="nl">targetView:</span><span class="p">(</span><span class="n">UIView</span> <span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;</span><span class="p">)</span><span class="n">targetView</span> <span class="nl">frame:</span><span class="p">(</span><span class="n">CGRect</span><span class="p">)</span><span class="n">frame</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="n">self</span><span class="p">.</span><span class="n">nativeExpressAdView</span> <span class="o">=</span> <span class="p">[[</span><span class="n">GADNativeExpressAdView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithAdSize:</span><span class="n">GADAdSizeFromCGSize</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">)</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span>                                                                 <span class="nl">origin:</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">];</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="n">self</span><span class="p">.</span><span class="n">nativeExpressAdView</span><span class="p">.</span><span class="n">adUnitID</span> <span class="o">=</span> <span class="n">GAD_NATIVE_UNIT_ID</span><span class="p">;</span>
</span><span class='line'>  <span class="n">self</span><span class="p">.</span><span class="n">nativeExpressAdView</span><span class="p">.</span><span class="n">rootViewController</span> <span class="o">=</span> <span class="n">viewController</span><span class="p">;</span>
</span><span class='line'>  <span class="n">self</span><span class="p">.</span><span class="n">nativeExpressAdView</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="n">self</span><span class="p">;</span>
</span><span class='line'>  <span class="p">[</span><span class="n">targetView</span> <span class="nl">addSubview:</span><span class="n">self</span><span class="p">.</span><span class="n">nativeExpressAdView</span><span class="p">];</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="n">GADRequest</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="n">GADRequest</span> <span class="n">request</span><span class="p">];</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="n">GAD_TEST_MODE</span><span class="p">)</span> <span class="p">{</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span>  <span class="n">request</span><span class="p">.</span><span class="n">testDevices</span> <span class="o">=</span> <span class="err">@</span><span class="p">[</span><span class="n">kGADSimulatorID</span><span class="p">];</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="p">}</span>
</span><span class='line'>  <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">nativeExpressAdView</span> <span class="nl">loadRequest:</span><span class="n">request</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="p">(</span><span class="n">UIView</span> <span class="o">&lt;</span><span class="n">em</span><span class="o">&gt;</span><span class="p">)</span><span class="nl">nativeAd:</span><span class="p">(</span><span class="n">UIViewController</span> <span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;</span><span class="p">)</span><span class="n">viewController</span> <span class="nl">frame:</span><span class="p">(</span><span class="n">CGRect</span><span class="p">)</span><span class="n">frame</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="n">self</span><span class="p">.</span><span class="n">nativeExpressAdView</span> <span class="o">=</span> <span class="p">[[</span><span class="n">GADNativeExpressAdView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithAdSize:</span><span class="n">GADAdSizeFromCGSize</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">)</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span>                                                                 <span class="nl">origin:</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">];</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="n">self</span><span class="p">.</span><span class="n">nativeExpressAdView</span><span class="p">.</span><span class="n">adUnitID</span> <span class="o">=</span> <span class="n">GAD_NATIVE_UNIT_ID</span><span class="p">;</span>
</span><span class='line'>  <span class="n">self</span><span class="p">.</span><span class="n">nativeExpressAdView</span><span class="p">.</span><span class="n">rootViewController</span> <span class="o">=</span> <span class="n">viewController</span><span class="p">;</span>
</span><span class='line'>  <span class="n">self</span><span class="p">.</span><span class="n">nativeExpressAdView</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="n">self</span><span class="p">;</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="n">GADRequest</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="n">GADRequest</span> <span class="n">request</span><span class="p">];</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="n">GAD_TEST_MODE</span><span class="p">)</span> <span class="p">{</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span>  <span class="n">request</span><span class="p">.</span><span class="n">testDevices</span> <span class="o">=</span> <span class="err">@</span><span class="p">[</span><span class="n">kGADSimulatorID</span><span class="p">];</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="p">}</span>
</span><span class='line'>  <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">nativeExpressAdView</span> <span class="nl">loadRequest:</span><span class="n">request</span><span class="p">];</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">nativeExpressAdView</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">pragma</span> <span class="n">mark</span> <span class="o">-</span> <span class="n">delegate</span> <span class="n">method</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">ul</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">nativeExpressAdViewDidReceiveAd:</span><span class="p">(</span><span class="n">GADNativeExpressAdView</span> <span class="o">*</span><span class="p">)</span><span class="n">nativeExpressAdView</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="c1">//NSLog(@&quot;nativeExpressAdViewDidReceiveAd&quot;);</span>
</span><span class='line'><span class="p">}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">nativeExpressAdView:</span><span class="p">(</span><span class="n">GADNativeExpressAdView</span> <span class="o">&lt;</span><span class="n">em</span><span class="o">&gt;</span><span class="p">)</span><span class="n">nativeExpressAdView</span> <span class="nl">didFailToReceiveAdWithError:</span><span class="p">(</span><span class="n">GADRequestError</span> <span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;</span><span class="p">)</span><span class="n">error</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="c1">//NSLog(@&quot;nativeExpressAdView: didFailToReceiveAdWithError&quot;);</span>
</span><span class='line'><span class="p">}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">nativeExpressAdViewWillPresentScreen:</span><span class="p">(</span><span class="n">GADNativeExpressAdView</span> <span class="o">*</span><span class="p">)</span><span class="n">nativeExpressAdView</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="c1">//NSLog(@&quot;nativeExpressAdViewWillPresentScreen&quot;);</span>
</span><span class='line'><span class="p">}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">nativeExpressAdViewWillDismissScreen:</span><span class="p">(</span><span class="n">GADNativeExpressAdView</span> <span class="o">*</span><span class="p">)</span><span class="n">nativeExpressAdView</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="c1">//NSLog(@&quot;nativeExpressAdViewWillDismissScreen&quot;);</span>
</span><span class='line'><span class="p">}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">nativeExpressAdViewDidDismissScreen:</span><span class="p">(</span><span class="n">GADNativeExpressAdView</span> <span class="o">*</span><span class="p">)</span><span class="n">nativeExpressAdView</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="c1">//NSLog(@&quot;nativeExpressAdViewDidDismissScreen&quot;);</span>
</span><span class='line'><span class="p">}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">nativeExpressAdViewWillLeaveApplication:</span><span class="p">(</span><span class="n">GADNativeExpressAdView</span> <span class="o">*</span><span class="p">)</span><span class="n">nativeExpressAdView</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="c1">//NSLog(@&quot;nativeExpressAdViewWillLeaveApplication&quot;);</span>
</span><span class='line'><span class="p">}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>関連記事</h2>

<ul>
<li><strong><a href="/blog/2016/09/05/objc-native-ads-in-ui-table-view/" title="iOSアプリのテーブルビューにネイティブ広告を表示するサンプル">iOSアプリのテーブルビューにネイティブ広告を表示するサンプル</a></strong></li>
</ul>


<h2>お薦めの参考書</h2>

<p><strong><a href="https://www.amazon.co.jp/gp/product/4797384514/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4797384514&linkCode=as2&tag=pinocchio-22">本気ではじめるiPhoneアプリ作り Xcode 7.x+Swift 2.x対応</a></strong><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=pinocchio-22&l=as2&o=9&a=4797384514" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br />
iOSアプリ開発をこれから始める方に最もお薦めな一冊です。解り辛い点は図解入りで解説されており、プログラミングの動作の仕組みから詳しく知ることができます。基本から通信処理まで押さえられており、アプリ公開の手順についても解説されています。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Androidアプリへの AdMob インタースティシャル広告導入]]></title>
    <link href="https://lab.dolice.net/blog/2015/05/04/android-admob-interstitial-ad/"/>
    <updated>2015-05-04T10:13:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2015/05/04/android-admob-interstitial-ad</id>
    <content type="html"><![CDATA[<p>Androidアプリに <a href="https://apps.admob.com/" title="AdMob">AdMob</a> のインタースティシャル広告を導入するサンプルを作成しました。</p>

<p>下記のサンプルでは、アプリがスリープ状態から復帰した時と、画面が再度読み込まれた時に全面広告が表示されます。</p>

<h2>サンプルダウンロード</h2>

<ul>
<li><a href="https://github.com/masakihirokawa/android-admob-interstitial-ad">https://github.com/masakihirokawa/android-admob-interstitial-ad</a></li>
</ul>


<h2>公式ドキュメント</h2>

<ul>
<li><a href="https://developers.google.com/mobile-ads-sdk/docs/admob/android/interstitial?hl=ja">https://developers.google.com/mobile-ads-sdk/docs/admob/android/interstitial?hl=ja</a></li>
</ul>


<h2>導入手順</h2>

<h3>1. Google Play Services SDK の読み込み</h3>

<p><em>build.gradle</em> から <strong>Google Play Services SDK</strong> を読み込みます。バージョンは最新版を指定してください。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>dependencies {&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;// 省略
</span><span class='line'>compile &#39;com.google.android.gms:play-services:7.3.0&#39;
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;}
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>2. AdMob 広告ユニットID の指定</h3>

<p><em>AdMobIntersBanner.java</em> の14行目で広告ユニットID を指定します。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">INTERS_AD_UNIT_ID</span> <span class="o">=</span> <span class="s">&quot;Your AdMob Ad unit ID&quot;</span><span class="o">;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>3. デバッグモードの指定</h3>

<p><em>AdMobIntersBanner.java</em> の15行目でデバッグモードをオンにしてください。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">DEBUG_MODE</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>4. テスト端末のデバイスID を指定</h3>

<p><em>AdMobIntersBanner.java</em> の17行目でテスト端末のデバイスID を指定します。</p>

<p>デバイスIDは、実機で一度広告を表示すると Android Studio の <em>LogCat</em> に表示されます。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">DEBUG_DEVICE_ID</span> <span class="o">=</span> <span class="o">{&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="s">&quot;Your test device ID&quot;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;};</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>5. テスト端末の追加</h3>

<p><em>AdMobIntersBanner.java</em> の51行目にあるコメントアウトを外し、テスト端末を追加します。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">adRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AdRequest</span><span class="o">.</span><span class="na">Builder</span><span class="o">()&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span>    <span class="o">.</span><span class="na">addTestDevice</span><span class="o">(</span><span class="n">AdRequest</span><span class="o">.</span><span class="na">DEVICE_ID_EMULATOR</span><span class="o">)</span>
</span><span class='line'>    <span class="o">.</span><span class="na">addTestDevice</span><span class="o">(</span><span class="n">DEBUG_DEVICE_ID</span><span class="o">[</span><span class="mi">0</span><span class="o">])</span>
</span><span class='line'>    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>下記に実装サンプルを記載します。導入の際のご参考になれば幸いです。</p>

<h2>サンプルソースコード</h2>

<h3>MainActivity.java</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">net</span><span class="o">.</span><span class="na">dolice</span><span class="o">.</span><span class="na">admobinterstitialadex</span><span class="o">;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="kn">import</span> <span class="nn">android.app.Activity</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="kn">import</span> <span class="nn">net.dolice.ad.AdMobIntersBanner</span><span class="o">;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="kd">private</span> <span class="n">AdMobIntersBanner</span> <span class="n">mIntersAd</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
</span><span class='line'>    <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// 全面広告の読み込み</span>
</span><span class='line'>    <span class="n">preloadInterstitialAd</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// 全面広告の読み込み</span>
</span><span class='line'><span class="kd">private</span> <span class="kt">void</span> <span class="nf">preloadInterstitialAd</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">mIntersAd</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AdMobIntersBanner</span><span class="o">();</span>
</span><span class='line'>    <span class="n">mIntersAd</span><span class="o">.</span><span class="na">preload</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// 全面広告が読み込み完了していれば表示</span>
</span><span class='line'><span class="kd">private</span> <span class="kt">void</span> <span class="nf">showInterstitialAd</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="c1">// 全面広告表示</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">mIntersAd</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">mIntersAd</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">onRestart</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">super</span><span class="o">.</span><span class="na">onRestart</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// 全面広告が読み込み完了していれば表示</span>
</span><span class='line'>    <span class="n">showInterstitialAd</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>AdMobIntersBanner.java</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">net</span><span class="o">.</span><span class="na">dolice</span><span class="o">.</span><span class="na">ad</span><span class="o">;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="kn">import</span> <span class="nn">android.content.Context</span><span class="o">;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="kn">import</span> <span class="nn">com.google.android.gms.ads.AdRequest</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">com.google.android.gms.ads.InterstitialAd</span><span class="o">;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;/&lt;</span><span class="n">em</span><span class="o">&gt;*</span>
</span><span class='line'> <span class="o">*</span> <span class="n">Created</span> <span class="n">by</span> <span class="n">Dolice</span> <span class="n">on</span> <span class="mi">15</span><span class="o">/</span><span class="mi">03</span><span class="o">/</span><span class="mi">19</span><span class="o">.</span>
</span><span class='line'> <span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;/&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AdMobIntersBanner</span> <span class="o">{&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="kd">private</span> <span class="n">InterstitialAd</span> <span class="n">mIntersAd</span><span class="o">;</span>
</span><span class='line'><span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">INTERS_AD_UNIT_ID</span> <span class="o">=</span> <span class="s">&quot;Your AdMob Ad unit ID&quot;</span><span class="o">;</span>
</span><span class='line'><span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">DEBUG_MODE</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span><span class='line'><span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">DEBUG_DEVICE_ID</span> <span class="o">=</span> <span class="o">{</span>
</span><span class='line'>        <span class="s">&quot;Your test device ID&quot;</span>
</span><span class='line'><span class="o">};</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> * 全面広告のプリロード</span>
</span><span class='line'><span class="cm"> * @param context</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">preload</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">mIntersAd</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InterstitialAd</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
</span><span class='line'>    <span class="n">mIntersAd</span><span class="o">.</span><span class="na">setAdUnitId</span><span class="o">(</span><span class="n">INTERS_AD_UNIT_ID</span><span class="o">);</span>
</span><span class='line'>    <span class="n">mIntersAd</span><span class="o">.</span><span class="na">loadAd</span><span class="o">(</span><span class="n">getAdRequest</span><span class="o">());</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> * 全面広告の表示</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">show</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">mIntersAd</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">mIntersAd</span><span class="o">.</span><span class="na">isLoaded</span><span class="o">())</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">mIntersAd</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> * 広告リクエストの取得</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="kd">private</span> <span class="n">AdRequest</span> <span class="nf">getAdRequest</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">AdRequest</span> <span class="n">adRequest</span><span class="o">;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">DEBUG_MODE</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">adRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AdRequest</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
</span><span class='line'>                <span class="o">.</span><span class="na">addTestDevice</span><span class="o">(</span><span class="n">AdRequest</span><span class="o">.</span><span class="na">DEVICE_ID_EMULATOR</span><span class="o">)</span>
</span><span class='line'>                <span class="c1">//.addTestDevice(DEBUG_DEVICE_ID[0])</span>
</span><span class='line'>                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">adRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AdRequest</span><span class="o">.</span><span class="na">Builder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">adRequest</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>以上で AdMob インタースティシャル広告の導入は完了になります。</p>

<p><a href="https://developers.google.com/mobile-ads-sdk/docs/admob/android/interstitial?hl=ja" title="公式ドキュメント">公式ドキュメント</a>に解りやすくサンプルが掲載されていますので、そちらも参考にされると良いかもしれません。</p>

<h2>お薦めの参考書</h2>

<p><strong><a href="https://www.amazon.co.jp/gp/product/4797386258/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4797386258&linkCode=as2&tag=pinocchio-22">詳解 Swift 改訂版</a></strong><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=pinocchio-22&l=as2&o=9&a=4797386258" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br />
Swiftのかなり入り込んだところまで解説しながら、実践コードを多数収録しています。応用本になりますので、入門書を読み終えて中級者から上級者に差し掛かる時に読むことをお勧めします。読み物としてだけではなくリファレンスとしても使用できます。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[AdMobバナー広告の iPhone 6/6 Plus対応]]></title>
    <link href="https://lab.dolice.net/blog/2014/09/28/iphone6-admob/"/>
    <updated>2014-09-28T16:00:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2014/09/28/iphone6-admob</id>
    <content type="html"><![CDATA[<p>AdMobバナー広告を iPhone 6/6 Plus（4.7-inch/5.5-inch）で表示する際は、下記のようにバナーを初期化することで綺麗に表示されます。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">GADBannerView</span> <span class="o">*</span><span class="n">gadView</span> <span class="o">=</span> <span class="p">[[</span><span class="n">GADBannerView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithAdSize:</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span>                      <span class="n">GADAdSizeFullWidthPortraitWithHeight</span><span class="p">(</span><span class="n">GAD_SIZE_320x50</span><span class="p">.</span><span class="n">height</span><span class="p">)];</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>バナーの横幅をフルサイズにして縦幅を自動調整する指定を行っています。</p>

<p>テキスト広告については既に対応がされているようで、レスポンシブなデザインになっていました。</p>

<h2>バナー表示クラスのダウンロード</h2>

<p>下記に AdMobバナーを表示する「<a href="https://github.com/masakihirokawa/objc-classes-dc-admob-banner" title="DCAdMobBanner">DCAdMobBanner</a>」クラスを作成しました。</p>

<ul>
<li><a href="https://github.com/masakihirokawa/objc-classes-dc-admob-banner">https://github.com/masakihirokawa/objc-classes-dc-admob-banner</a></li>
</ul>


<p>実装ファイルの 53行目でアプリの広告ユニットIDを指定していますので、こちらを変更の上ご使用ください。</p>

<h2>関連記事</h2>

<ul>
<li><strong><a href="/blog/2014/07/30/admob-optimization/" title="AdMobの広告収益をアップする5つのポイント">AdMobの広告収益をアップする5つのポイント</a></strong></li>
<li><strong><a href="/blog/2014/03/12/admob-mediation/" title="AdMobのメディエーションを最適化する方法">AdMobのメディエーションを最適化する方法</a></strong></li>
<li><strong><a href="/blog/2014/02/25/objc-admob-inters/" title="iPhoneアプリに AdMobのインタースティシャル広告を導入する方法">iPhoneアプリに AdMobのインタースティシャル広告を導入する方法</a></strong></li>
</ul>


<h2>お薦めの参考書</h2>

<p><strong><a href="https://www.amazon.co.jp/gp/product/4797386258/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4797386258&linkCode=as2&tag=pinocchio-22">詳解 Swift 改訂版</a></strong><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=pinocchio-22&l=as2&o=9&a=4797386258" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br />
Swiftのかなり入り込んだところまで解説しながら、実践コードを多数収録しています。応用本になりますので、入門書を読み終えて中級者から上級者に差し掛かる時に読むことをお勧めします。読み物としてだけではなくリファレンスとしても使用できます。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[AdMobの広告収益をアップする5つのポイント]]></title>
    <link href="https://lab.dolice.net/blog/2014/07/30/admob-optimization/"/>
    <updated>2014-07-30T14:50:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2014/07/30/admob-optimization</id>
    <content type="html"><![CDATA[<p><a href="https://apps.admob.com/" title="AdMob">AdMob</a>の広告収益をアップする 5つのポイントを以下に記載します。</p>

<p>下記の設定項目を最適化することで、広告収益が2割程向上しました。他にも改善点があるかもしれませんので、また統計が取れ次第こちらに追記します。</p>

<h2>目次</h2>

<ol>
<li><a href="#admob-opt1">メディエーションに指定しているアドネットワークの国別設定</a></li>
<li><a href="#admob-opt2">メディエーションのアドネットワーク最適化</a></li>
<li><a href="#admob-opt3">テキスト広告のスタイルをアプリの配色に合わせて最適化</a></li>
<li><a href="#admob-opt4">広告の表示頻度について</a></li>
<li><a href="#admob-opt5">インタースティシャル広告の導入</a></li>
<li><a href="#admob-opt-ex">自社広告の出稿</a> (e.x.)</li>
</ol>


<h2><a name="admob-opt1">1. メディエーションに指定しているアドネットワークの国別設定</a></h2>

<p>メディエーションの設定から、iAdや Nendなどの広告を表示する国を指定することができます。</p>

<p>Nendの対応国はまだ日本のみのようですので、国外では非表示に設定すると、よりユーザーにとって有効な広告が表示されます。</p>

<p>iAdの広告はクリック単価が高くインプレッションや表示時間に応じて収益が発生しますが、まだ対応国が下記の国々に限られるため、それ以外の国では非表示にすることで大幅な収益向上が見込めます。</p>

<h3>iAdの対応国（2014年7月時点）</h3>

<ul>
<li>日本</li>
<li>カナダ</li>
<li>米国</li>
<li>メキシコ</li>
<li>ニュージーランド</li>
<li>フランス</li>
<li>イタリア</li>
<li>ドイツ</li>
<li>スペイン</li>
<li>イギリス</li>
<li>アイルランド</li>
<li>オーストラリア</li>
<li>香港</li>
<li>台湾</li>
</ul>


<p>以前はアプリ内で AdMobと iAdを切り替え表示していましたが、アプリ内では AdMobのみを読み込むよう実装し、iAdはメディエーションで管理する方が良いかもしれません。国別に有効 eCPMも指定できますので、この方法により iAdの収益が低下することはありません。</p>

<p><strong>2014年10月追記</strong></p>

<p>iAdの対応国が以下の25ヶ国に増えました。これにより、国別設定をしなくても安定した収益が見込めそうです。</p>

<h3>iAdの対応国（2014年10月現在）</h3>

<ul>
<li>米国</li>
<li>カナダ</li>
<li>メキシコ</li>
<li>イギリス</li>
<li>フランス</li>
<li>ドイツ</li>
<li>イタリア</li>
<li>スペイン</li>
<li>アイルランド</li>
<li>ロシア</li>
<li>スイス</li>
<li>日本</li>
<li>台湾</li>
<li>香港</li>
<li>オーストラリア</li>
<li>ニュージーランド</li>
<li>オーストリア</li>
<li>ベルギー</li>
<li>デンマーク</li>
<li>フィンランド</li>
<li>ルクセンブルク</li>
<li>オランダ</li>
<li>ノルウェー</li>
<li>ポーランド</li>
<li>スウェーデン</li>
</ul>


<h3>アドネットワークの国別設定手順</h3>

<h4>1. <a href="https://apps.admob.com/" title="AdMob">AdMob</a>のサイトにログインし「収益化」メニューを開く</h4>

<p><img src="/images/article/admob_optimization/admob_optimization_scr1.jpg" alt="" /></p>

<h4>2. 「すべてのアプリ」をクリックし、メディエーションを編集したいアプリを選択</h4>

<p><img src="/images/article/admob_optimization/admob_optimization_scr2.jpg" alt="" /></p>

<h4>3. 「メディエーションを編集」リンクを開く</h4>

<p><img src="/images/article/admob_optimization/admob_optimization_scr3.jpg" alt="" /></p>

<h4>4. 「AdMob ネットワークを最適化する」にチェックを入れる</h4>

<p><img src="/images/article/admob_optimization/admob_optimization_scr4.jpg" alt="" /></p>

<h4>5. 設定を変更したいアドネットワークの「国別の設定」にある「編集」リンクを開く</h4>

<p><img src="/images/article/admob_optimization/admob_optimization_scr5.jpg" alt="" /></p>

<h4>6. 左側の国選択メニューより広告を表示したい国を選択し「その他すべての国に対する広告リクエストを無効化」にチェックを入れる</h4>

<p><img src="/images/article/admob_optimization/admob_optimization_scr6.jpg" alt="" /></p>

<h4>7. 「次へ」ボタンでポップアップを閉じたら「保存」ボタンで設定を適用</h4>

<p><img src="/images/article/admob_optimization/admob_optimization_scr7.jpg" alt="" /></p>

<h2><a name="admob-opt2">2. メディエーションのアドネットワーク最適化</a></h2>

<p>以前に「<a href="/blog/2014/03/12/admob-mediation/" title="AdMobのメディエーションを最適化する方法">AdMobのメディエーションを最適化する方法</a>」という記事で紹介した方法を用い、メディエーションに追加しているアドネットワークを最適化することで、eCPMの値の高いアドネットワークの広告を優先的に表示することができます。</p>

<h2><a name="admob-opt3">3. テキスト広告のスタイルをアプリの配色に合わせて最適化</a></h2>

<p>テキスト広告のスタイルをアプリの配色に合わせることで、若干クリック率が増加しました。</p>

<p>下記は「<a href="/blog/2014/05/22/ios-law-of-attraction/" title="望みが叶う！引き寄せの法則アプリ">望みが叶う！引き寄せの法則アプリ</a>」のテキスト広告で、アプリの配色がグリーンとピンク基調のため、それに合わせてスタイルを指定しています。ボーダーの色はなるべくくっきりしている方が良いかもしれませんが、その辺りは未検証です。</p>

<p><img src="/images/article/admob_optimization/admob_optimization_scr8.jpg" alt="" /></p>

<h2><a name="admob-opt4">4. 広告の表示頻度について</a></h2>

<p>広告の表示頻度を「30秒」に指定したところ、当方のアプリでは広告の掲載率が減少し、一時的にインプレッション数とクリック率、クリック単価が減少しました。「60秒」に戻したところ改善しましたが、こちらもまだ検証の余地がありそうです。</p>

<h2><a name="admob-opt5">5. インタースティシャル広告の導入</a></h2>

<p>インタースティシャル広告は高単価でクリック率も高くとても有効です。以前に「<a href="/blog/2014/02/25/objc-admob-inters/" title="iPhoneアプリに AdMobのインタースティシャル広告を導入する方法">iPhoneアプリに AdMobのインタースティシャル広告を導入する方法</a>」という記事に iOSアプリへの導入手順を記載しましたので、そちらも併せてご覧ください。</p>

<p>全面広告を表示するタイミングは、ゲームならクリア時やゲームオーバー時など、離脱時が最もストレスが少ないようです。ただ、収益性の面では、アプリ起動時に表示するか、他のメニューへ移動した際など、なるべく早いタイミング且つ、浅い階層で表示する方が良いかもしれません。少なくとも 2回メニューをタップした先の画面に表示するようにしたところ、リクエスト RPMは大幅に減少しました。この辺りもまだサーバサイドで設定値を変えながら検証中の段階です。</p>

<p>また、技術的な話になりますが、iOS 7.1になって以降アプリがタスクから落ちづらくなりましたので、インタースティシャル広告の読み込みは「viewDidAppear」内で “ロード完了フラグ” が立っていない場合に行い、読み込みが完了したら “ロード完了フラグ” を立て、「AppDelegate.m」でアプリがバックグラウンドへ移行した際に “ロード完了フラグ” を落とす処理も有効です。</p>

<p>しかし、なるべくユーザーの方にストレスを与えず、ミスクリックも防ぐ自然な実装を模索したいですね。その方がユーザーにとって本当に有益な情報（＝広告）を提供できますので。実際に企業が広告を多く出稿する時期は、インタースティシャル／通常バナー共に魅力的な広告が多いので、ユーザーが一番ストレスを感じないタイミングで表示するのがベストだと思います。</p>

<h2><a name="admob-opt-ex">6. 自社広告の出稿 (e.x.)</a></h2>

<p><a href="https://apps.admob.com/" title="AdMob">AdMob</a>サイトの「宣伝」メニューより自社広告を出稿できます。一度自社広告を作成したところ、テキスト広告も簡単かつ綺麗に作成でき、国別に広告を出稿できますので、非常に効果は高いと思われます。</p>

<p>以上が AdMobの収益最適化のポイントです。もう当たり前の知識かもしれませんが、最近まであまり知識もないまま運用していましたので、もしかしたら需要があるかと思い書きました。他にも有効な最適化の手順がありましたら、是非教えていただければ嬉しいです。</p>

<h2>関連記事</h2>

<ul>
<li><strong><a href="/blog/2014/03/12/admob-mediation/" title="AdMobのメディエーションを最適化する方法">AdMobのメディエーションを最適化する方法</a></strong></li>
<li><strong><a href="/blog/2014/02/25/objc-admob-inters/" title="iPhoneアプリに AdMobのインタースティシャル広告を導入する方法">iPhoneアプリに AdMobのインタースティシャル広告を導入する方法</a></strong></li>
</ul>


<h2>お薦めの参考書</h2>

<p><strong><a href="https://www.amazon.co.jp/gp/product/4839957037/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4839957037&linkCode=as2&tag=pinocchio-22">Swiftではじめる iPhoneアプリ開発の教科書 Swift 2 &amp; Xcode 7対応</a></strong><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=pinocchio-22&l=as2&o=9&a=4839957037" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br />
この参考書の通りに実践サンプルを作成することで、確実に力を養うことができます。サンプルコードもサイトからダウンロード出来るようになっており、特に広告の貼り方などが参考になりました。Swiftで何が出来るかを知ることができ、入門用にお薦めの1冊です。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[AdMobのメディエーションを最適化する方法]]></title>
    <link href="https://lab.dolice.net/blog/2014/03/12/admob-mediation/"/>
    <updated>2014-03-12T14:00:00+09:00</updated>
    <id>https://lab.dolice.net/blog/2014/03/12/admob-mediation</id>
    <content type="html"><![CDATA[<p><a href="https://apps.admob.com/" title="AdMob">AdMob</a>のメディエーションを最適化する方法を以下に記載します。</p>

<p>メディエーションに設定しているアドネットワークの eCPMを入力することで、クリック率の高い広告が優先的に表示され、広告収益アップに繋がります。</p>

<p>下記に <a href="https://apps.admob.com/" title="AdMob">AdMob</a>のメディエーション最適化方法を記載します。</p>

<h2>最適化手順</h2>

<h3>1. <a href="https://apps.admob.com/" title="AdMob">AdMob</a>のサイトにログインし、「収益化」メニューを開く</h3>

<p><img src="/images/article/admob_mediation/admob_mediation_scr1.jpg" alt="" /></p>

<h3>2. 「すべてのアプリ」をクリックし、メディエーションを編集したいアプリを選択</h3>

<p><img src="/images/article/admob_mediation/admob_mediation_scr2.jpg" alt="" /></p>

<h3>3. 「メディエーションを編集」リンクを開く</h3>

<p><img src="/images/article/admob_mediation/admob_mediation_scr3.jpg" alt="" /></p>

<h3>4. 「AdMob ネットワークを最適化する」にチェックを入れ、各アドネットワークの eCPMの値を $単位で入力</h3>

<p><img src="/images/article/admob_mediation/admob_mediation_scr4.jpg" alt="" /></p>

<h3>5. 「保存」ボタンを押して完了</h3>

<h2>関連記事</h2>

<ul>
<li><strong><a href="/blog/2014/03/02/objc-adfurikun-admob-mediation/" title="iPhoneアプリへのアドフリくん導入（AdMobメディエーション編）">iPhoneアプリへのアドフリくん導入（AdMobメディエーション編）</a></strong></li>
<li><strong><a href="/blog/2014/03/02/objc-adfurikun-interstitial-ads/" title="iPhoneアプリへのアドフリくん導入（インタースティシャル広告編）">iPhoneアプリへのアドフリくん導入（インタースティシャル広告編）</a></strong></li>
<li><strong><a href="/blog/2014/02/25/objc-admob-inters/" title="iPhoneアプリに AdMobのインタースティシャル広告を導入する方法">iPhoneアプリに AdMobのインタースティシャル広告を導入する方法</a></strong></li>
</ul>


<h2>お薦めの参考書</h2>

<p><strong><a href="https://www.amazon.co.jp/gp/product/4839957037/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4839957037&linkCode=as2&tag=pinocchio-22">Swiftではじめる iPhoneアプリ開発の教科書 Swift 2 &amp; Xcode 7対応</a></strong><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=pinocchio-22&l=as2&o=9&a=4839957037" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br />
この参考書の通りに実践サンプルを作成することで、確実に力を養うことができます。サンプルコードもサイトからダウンロード出来るようになっており、特に広告の貼り方などが参考になりました。Swiftで何が出来るかを知ることができ、入門用にお薦めの1冊です。</p>
]]></content>
  </entry>
  
</feed>
